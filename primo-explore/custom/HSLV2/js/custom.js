!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(window){var count=0,logEnabled=!1,hiddenCheckEnabled=!1,msgHeaderLen="message".length,msgId="[iFrameSizer]",msgIdLen=msgId.length,pagePosition=null,requestAnimationFrame=window.requestAnimationFrame,resetRequiredMethods={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},settings={},timer=null,defaults={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){warn("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};function addEventListener(obj,evt,func){"addEventListener"in window?obj.addEventListener(evt,func,!1):"attachEvent"in window&&obj.attachEvent("on"+evt,func)}function removeEventListener(el,evt,func){"removeEventListener"in window?el.removeEventListener(evt,func,!1):"detachEvent"in window&&el.detachEvent("on"+evt,func)}function formatLogHeader(iframeId){return msgId+"["+function(iframeId){var retStr="Host page: "+iframeId;return window.top!==window.self&&(retStr=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+iframeId:"Nested host page: "+iframeId),retStr}(iframeId)+"]"}function isLogEnabled(iframeId){return settings[iframeId]?settings[iframeId].log:logEnabled}function log(iframeId,msg){output("log",iframeId,msg,isLogEnabled(iframeId))}function info(iframeId,msg){output("info",iframeId,msg,isLogEnabled(iframeId))}function warn(iframeId,msg){output("warn",iframeId,msg,!0)}function output(type,iframeId,msg,enabled){!0===enabled&&"object"===_typeof(window.console)&&console[type](formatLogHeader(iframeId),msg)}function iFrameListener(event){function resizeIFrame(){ensureInRange("Height"),ensureInRange("Width"),syncResize(function(){setSize(messageData),setPagePosition(iframeId)},messageData,"init")}function ensureInRange(Dimension){var max=Number(settings[iframeId]["max"+Dimension]),min=Number(settings[iframeId]["min"+Dimension]),dimension=Dimension.toLowerCase(),size=Number(messageData[dimension]);log(iframeId,"Checking "+dimension+" is in range "+min+"-"+max),size<min&&(size=min,log(iframeId,"Set "+dimension+" to min value")),max<size&&(size=max,log(iframeId,"Set "+dimension+" to max value")),messageData[dimension]=""+size}function getMsgBody(offset){return msg.substr(msg.indexOf(":")+msgHeaderLen+offset)}function sendPageInfoToIframe(iframe,iframeId){debouce(function(){var bodyPosition,iFramePosition;trigger("Send Page Info","pageInfo:"+(bodyPosition=document.body.getBoundingClientRect(),iFramePosition=messageData.iframe.getBoundingClientRect(),JSON.stringify({clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(iFramePosition.top-bodyPosition.top,10),offsetLeft:parseInt(iFramePosition.left-bodyPosition.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})),iframe,iframeId)},32)}function getElementPosition(target){var iFramePosition=target.getBoundingClientRect();return getPagePosition(iframeId),{x:Math.floor(Number(iFramePosition.left)+Number(pagePosition.x)),y:Math.floor(Number(iFramePosition.top)+Number(pagePosition.y))}}function scrollRequestFromChild(addOffset){var offset=addOffset?getElementPosition(messageData.iframe):{x:0,y:0},newPosition={x:Number(messageData.width)+offset.x,y:Number(messageData.height)+offset.y};log(iframeId,"Reposition requested from iFrame (offset x:"+offset.x+" y:"+offset.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(addOffset?"Offset":"")](newPosition.x,newPosition.y):warn(iframeId,"Unable to scroll to requested position, window.parentIFrame not found"):(pagePosition=newPosition,scrollTo(),log(iframeId,"--"))}function scrollTo(){!1!==callback("scrollCallback",pagePosition)?setPagePosition(iframeId):unsetPagePosition()}function callback(funcName,val){return chkCallback(iframeId,funcName,val)}var retBool,retCode,data,msg=event.data,messageData={},iframeId=null;"[iFrameResizerChild]Ready"===msg?function(){for(var iframeId in settings)trigger("iFrame requested init",createOutgoingMsg(iframeId),document.getElementById(iframeId),iframeId)}():msgId===(""+msg).substr(0,msgIdLen)&&msg.substr(msgIdLen).split(":")[0]in settings?(data=msg.substr(msgIdLen).split(":"),messageData={iframe:settings[data[0]].iframe,id:data[0],height:data[1],width:data[2],type:data[3]},iframeId=messageData.id,(retCode=messageData.type in{true:1,false:1,undefined:1})&&log(iframeId,"Ignoring init message from meta parent page"),!retCode&&function(iframeId){var retBool=!0;return settings[iframeId]||(retBool=!1,warn(messageData.type+" No settings for "+iframeId+". Message was: "+msg)),retBool}(iframeId)&&(log(iframeId,"Received: "+msg),retBool=!0,null===messageData.iframe&&(warn(iframeId,"IFrame ("+messageData.id+") not found"),retBool=!1),retBool&&function(){var remoteHost,origin=event.origin,checkOrigin=settings[iframeId].checkOrigin;if(checkOrigin&&""+origin!="null"&&!(checkOrigin.constructor===Array?function(){var i=0,retCode=!1;for(log(iframeId,"Checking connection is from allowed list of origins: "+checkOrigin);i<checkOrigin.length;i++)if(checkOrigin[i]===origin){retCode=!0;break}return retCode}():(remoteHost=settings[iframeId].remoteHost,log(iframeId,"Checking connection is from: "+remoteHost),origin===remoteHost)))throw new Error("Unexpected message received from: "+origin+" for "+messageData.iframe.id+". Message was: "+event.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(settings[iframeId].firstRun&&(settings[iframeId].firstRun=!1),messageData.type){case"close":closeIFrame(messageData.iframe);break;case"message":msgBody=getMsgBody(6),log(iframeId,"MessageCallback passed: {iframe: "+messageData.iframe.id+", message: "+msgBody+"}"),callback("messageCallback",{iframe:messageData.iframe,message:JSON.parse(msgBody)}),log(iframeId,"--");break;case"scrollTo":scrollRequestFromChild(!1);break;case"scrollToOffset":scrollRequestFromChild(!0);break;case"pageInfo":sendPageInfoToIframe(settings[iframeId].iframe,iframeId),function(){function setListener(type,func){function sendPageInfo(){settings[id]?sendPageInfoToIframe(settings[id].iframe,id):stop()}["scroll","resize"].forEach(function(evt){log(id,type+evt+" listener for sendPageInfo"),func(window,evt,sendPageInfo)})}function stop(){setListener("Remove ",removeEventListener)}var id=iframeId;setListener("Add ",addEventListener),settings[id].stopPageInfo=stop}();break;case"pageInfoStop":settings[iframeId]&&settings[iframeId].stopPageInfo&&(settings[iframeId].stopPageInfo(),delete settings[iframeId].stopPageInfo);break;case"inPageLink":location=getMsgBody(9),hash=location.split("#")[1]||"",hashData=decodeURIComponent(hash),(target=document.getElementById(hashData)||document.getElementsByName(hashData)[0])?(jumpPosition=getElementPosition(target),log(iframeId,"Moving to in page link (#"+hash+") at x: "+jumpPosition.x+" y: "+jumpPosition.y),pagePosition={x:jumpPosition.x,y:jumpPosition.y},scrollTo(),log(iframeId,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(hash):log(iframeId,"In page link #"+hash+" not found and window.parentIFrame not found"):log(iframeId,"In page link #"+hash+" not found");break;case"reset":resetIFrame(messageData);break;case"init":resizeIFrame(),callback("initCallback",messageData.iframe),callback("resizedCallback",messageData);break;default:resizeIFrame(),callback("resizedCallback",messageData)}var location,jumpPosition,hash,hashData,target,msgBody}())):info(iframeId,"Ignored: "+msg)}function chkCallback(iframeId,funcName,val){var func=null,retVal=null;if(settings[iframeId]){if("function"!=typeof(func=settings[iframeId][funcName]))throw new TypeError(funcName+" on iFrame["+iframeId+"] is not a function");retVal=func(val)}return retVal}function closeIFrame(iframe){var iframeId=iframe.id;log(iframeId,"Removing iFrame: "+iframeId),iframe.parentNode.removeChild(iframe),chkCallback(iframeId,"closedCallback",iframeId),log(iframeId,"--"),delete settings[iframeId]}function getPagePosition(iframeId){null===pagePosition&&log(iframeId,"Get page position: "+(pagePosition={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}).x+","+pagePosition.y)}function setPagePosition(iframeId){null!==pagePosition&&(window.scrollTo(pagePosition.x,pagePosition.y),log(iframeId,"Set page position: "+pagePosition.x+","+pagePosition.y),unsetPagePosition())}function unsetPagePosition(){pagePosition=null}function resetIFrame(messageData){log(messageData.id,"Size reset requested by "+("init"===messageData.type?"host page":"iFrame")),getPagePosition(messageData.id),syncResize(function(){setSize(messageData),trigger("reset","reset",messageData.iframe,messageData.id)},messageData,"reset")}function setSize(messageData){function chkZero(dimension){hiddenCheckEnabled||"0"!==messageData[dimension]||(hiddenCheckEnabled=!0,log(iframeId,"Hidden iFrame detected, creating visibility listener"),function(){function checkIFrames(){function checkIFrame(settingId){function chkDimension(dimension){return"0px"===settings[settingId].iframe.style[dimension]}null!==settings[settingId].iframe.offsetParent&&(chkDimension("height")||chkDimension("width"))&&trigger("Visibility change","resize",settings[settingId].iframe,settingId)}for(var settingId in settings)checkIFrame(settingId)}function mutationObserved(mutations){log("window","Mutation observed: "+mutations[0].target+" "+mutations[0].type),debouce(checkIFrames,16)}var MutationObserver=window.MutationObserver||window.WebKitMutationObserver;MutationObserver&&(target=document.querySelector("body"),new MutationObserver(mutationObserved).observe(target,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}));var target}())}function processDimension(dimension){!function(dimension){messageData.iframe.style[dimension]=messageData[dimension]+"px",log(messageData.id,"IFrame ("+iframeId+") "+dimension+" set to "+messageData[dimension]+"px")}(dimension),chkZero(dimension)}var iframeId=messageData.iframe.id;settings[iframeId]&&(settings[iframeId].sizeHeight&&processDimension("height"),settings[iframeId].sizeWidth&&processDimension("width"))}function syncResize(func,messageData,doNotSync){doNotSync!==messageData.type&&requestAnimationFrame?(log(messageData.id,"Requesting animation frame"),requestAnimationFrame(func)):func()}function trigger(calleeMsg,msg,iframe,id){var target;id=id||iframe.id,settings[id]&&(iframe&&"contentWindow"in iframe&&null!==iframe.contentWindow?(target=settings[id].targetOrigin,log(id,"["+calleeMsg+"] Sending msg to iframe["+id+"] ("+msg+") targetOrigin: "+target),iframe.contentWindow.postMessage(msgId+msg,target)):(info(id,"["+calleeMsg+"] IFrame("+id+") not found"),settings[id]&&delete settings[id]))}function createOutgoingMsg(iframeId){return iframeId+":"+settings[iframeId].bodyMarginV1+":"+settings[iframeId].sizeWidth+":"+settings[iframeId].log+":"+settings[iframeId].interval+":"+settings[iframeId].enablePublicMethods+":"+settings[iframeId].autoResize+":"+settings[iframeId].bodyMargin+":"+settings[iframeId].heightCalculationMethod+":"+settings[iframeId].bodyBackground+":"+settings[iframeId].bodyPadding+":"+settings[iframeId].tolerance+":"+settings[iframeId].inPageLinks+":"+settings[iframeId].resizeFrom+":"+settings[iframeId].widthCalculationMethod}function setupIFrame(iframe,options){var msg,iframeId=function(iframeId){var id;return""===iframeId&&(iframe.id=(id=options&&options.id||defaults.id+count++,null!==document.getElementById(id)&&(id+=count++),iframeId=id),logEnabled=(options||{}).log,log(iframeId,"Added missing iframe ID: "+iframeId+" ("+iframe.src+")")),iframeId}(iframe.id);iframeId in settings&&"iFrameResizer"in iframe?warn(iframeId,"Ignored iFrame, already setup."):(!function(options){var remoteHost;options=options||{},settings[iframeId]={firstRun:!0,iframe:iframe,remoteHost:iframe.src.split("/").slice(0,3).join("/")},function(options){if("object"!==(void 0===options?"undefined":_typeof(options)))throw new TypeError("Options is not an object")}(options),function(options){for(var option in defaults)defaults.hasOwnProperty(option)&&(settings[iframeId][option]=options.hasOwnProperty(option)?options[option]:defaults[option])}(options),settings[iframeId].targetOrigin=!0===settings[iframeId].checkOrigin?""===(remoteHost=settings[iframeId].remoteHost)||"file://"===remoteHost?"*":remoteHost:"*"}(options),log(iframeId,"IFrame scrolling "+(settings[iframeId].scrolling?"enabled":"disabled")+" for "+iframeId),iframe.style.overflow=!1===settings[iframeId].scrolling?"hidden":"auto",iframe.scrolling=!1===settings[iframeId].scrolling?"no":"yes",function(){function addStyle(style){1/0!==settings[iframeId][style]&&0!==settings[iframeId][style]&&(iframe.style[style]=settings[iframeId][style]+"px",log(iframeId,"Set "+style+" = "+settings[iframeId][style]+"px"))}function chkMinMax(dimension){if(settings[iframeId]["min"+dimension]>settings[iframeId]["max"+dimension])throw new Error("Value for min"+dimension+" can not be greater than max"+dimension)}chkMinMax("Height"),chkMinMax("Width"),addStyle("maxHeight"),addStyle("minHeight"),addStyle("maxWidth"),addStyle("minWidth")}(),"number"!=typeof settings[iframeId].bodyMargin&&"0"!==settings[iframeId].bodyMargin||(settings[iframeId].bodyMarginV1=settings[iframeId].bodyMargin,settings[iframeId].bodyMargin=settings[iframeId].bodyMargin+"px"),msg=createOutgoingMsg(iframeId),addEventListener(iframe,"load",function(){var firstRun,resetRequertMethod;trigger("iFrame.onload",msg,iframe),firstRun=settings[iframeId].firstRun,resetRequertMethod=settings[iframeId].heightCalculationMethod in resetRequiredMethods,!firstRun&&resetRequertMethod&&resetIFrame({iframe:iframe,height:0,width:0,type:"init"})}),trigger("init",msg,iframe),Function.prototype.bind&&(settings[iframeId].iframe.iFrameResizer={close:closeIFrame.bind(null,settings[iframeId].iframe),resize:trigger.bind(null,"Window resize","resize",settings[iframeId].iframe),moveToAnchor:function(anchor){trigger("Move to anchor","inPageLink:"+anchor,settings[iframeId].iframe,iframeId)},sendMessage:function(message){trigger("Send Message","message:"+(message=JSON.stringify(message)),settings[iframeId].iframe,iframeId)}}))}function debouce(fn,time){null===timer&&(timer=setTimeout(function(){timer=null,fn()},time))}function resizeIFrames(event){log("window","Trigger event: "+event),debouce(function(){sendTriggerMsg("Window "+event,"resize")},16)}function tabVisible(){"hidden"!==document.visibilityState&&(log("document","Trigger event: Visiblity change"),debouce(function(){sendTriggerMsg("Tab Visable","resize")},16))}function sendTriggerMsg(eventName,event){function isIFrameResizeEnabled(iframeId){return"parent"===settings[iframeId].resizeFrom&&settings[iframeId].autoResize&&!settings[iframeId].firstRun}for(var iframeId in settings)isIFrameResizeEnabled(iframeId)&&trigger(eventName,event,document.getElementById(iframeId),iframeId)}function factory(){function init(options,element){element&&(!function(){if(!element.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==element.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+element.tagName+">")}(),setupIFrame(element,options),iFrames.push(element))}var iFrames;return function(){var x,vendors=["moz","webkit","o","ms"];for(x=0;x<vendors.length&&!requestAnimationFrame;x+=1)requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];requestAnimationFrame||log("setup","RequestAnimationFrame not supported")}(),addEventListener(window,"message",iFrameListener),addEventListener(window,"resize",function(){resizeIFrames("resize")}),addEventListener(document,"visibilitychange",tabVisible),addEventListener(document,"-webkit-visibilitychange",tabVisible),addEventListener(window,"focusin",function(){resizeIFrames("focus")}),addEventListener(window,"focus",function(){resizeIFrames("focus")}),function(options,target){switch(iFrames=[],void 0===target?"undefined":_typeof(target)){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(target||"iframe"),init.bind(void 0,options));break;case"object":init(options,target);break;default:throw new TypeError("Unexpected data type ("+(void 0===target?"undefined":_typeof(target))+")")}return iFrames}}window.jQuery&&(jQuery.fn.iFrameResize=function(options){return this.filter("iframe").each(function(index,element){setupIFrame(element,options)}).end()}),"function"==typeof define&&define.amd?define([],factory):"object"===(void 0===module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=factory():window.iFrameResize=window.iFrameResize||factory()}(window||{})},{}],2:[function(require,module,exports){"use strict";var iFrameResize=require("./iframeResizer"),app=app||angular.module("viewCustom",["angularLoad","hathiTrustAvailability","sendSms"]).constant("nodeserver","https://apiconnector.thirdiron.com/v1/libraries/72").config(["$sceDelegateProvider","nodeserver",function($sceDelegateProvider,nodeserver){var urlWhitelist=$sceDelegateProvider.resourceUrlWhitelist();urlWhitelist.push(nodeserver+"**"),$sceDelegateProvider.resourceUrlWhitelist(urlWhitelist)}]);app.controller("prmLoginAlmaMashupAfterController",["$http","$scope","$sce",function($http,$scope,$sce){var mashScope;$scope.sizeIframe=function(){iFrameResize({log:!1,checkOrigin:!1},".mashup-iframe")},function traverse(node){mashScope||(node.$ctrl&&node.$ctrl.service&&node.$ctrl.service.linkElement&&"Alma-E"===node.$ctrl.service.linkElement.category?$scope.mashScope=node.$ctrl:(node.$$childHead&&traverse(node.$$childHead),node.$$nextSibling&&traverse(node.$$nextSibling)))}($scope.$root),this.$onInit=function(){$scope.showGalterIFrame="nui.getit.alma_tab1_norestrict"===this.containerCtrl.service.title};var LINK_TEMPLATE="https://www-proto.galter.northwestern.edu/search/results/view_it_primo?url=";if("search.library.northwestern.edu"===location.hostname&&(LINK_TEMPLATE="https://galter.northwestern.edu/search/results/view_it_primo?url="),$scope.mashScope){$scope.mashScope.isMashupLink=function(){return!1};var mashLink=$scope.mashScope.service.linkElement.links[0].link;$scope.isLinkAvailable=!1,mashLink&&void 0!==mashLink&&($scope.mashLink=$sce.trustAsResourceUrl(LINK_TEMPLATE+encodeURIComponent(mashLink)),$scope.isLinkAvailable=!0)}}]),app.component("prmLoginAlmaMashupAfter",{controller:"prmLoginAlmaMashupAfterController",require:{containerCtrl:"^prmFullViewServiceContainer"},template:'\n  <div ng-if="showGalterIFrame && isLinkAvailable">\n    <iframe class="mashup-iframe"\n            iframe-onload="{{sizeIframe()}}"\n            ng-src="{{mashLink}}"\n            style="width: 100%; border: none; border-radius: 2px; overflow: hidden;"\n            id="iFrameResizer1"\n            scrolling="no" />\n  </div>\n'}),app.controller("prmNoSearchResultAfterController",[function(){var vm=this;vm.getSearchTerm=function(){return vm.parentCtrl.term}}]),app.component("prmNoSearchResultAfter",{bindings:{parentCtrl:"<"},controller:"prmNoSearchResultAfterController",template:'<md-card class="default-card zero-margin _md md-primoExplore-theme"><md-card-title><md-card-title-text><span translate="" class="md-headline ng-scope">No records found.</span></md-card-title-text></md-card-title><md-card-content><p><span>There are no results matching your search: <i>{{$ctrl.getSearchTerm()}}</i>. Looking for a book? Try again searching items held at other libraries:</span></p><md-button class="md-raised md-button md-primoExplore-theme md-ink-ripple" href="http://www.worldcat.org/search?q={{$ctrl.getSearchTerm()}}" type="button" aria-label="Search WorldCat" style="margin-left:0;margin-right:0;"> <img src="custom/NULV3/img/worldcat-logo.png" width="22" height="22" alt="worldcat-logo" style="vertical-align:middle;"> Search WorldCat</md-button><p><span>Looking for an article? Try <strong><a href="http://scholar.google.com/scholar?hl=en&q={{$ctrl.getSearchTerm()}}">Google Scholar</a></strong></span>.</p><p><span translate="" class="bold-text ng-scope">Suggestions:</span></p><ul><li translate="" class="ng-scope">Make sure that all words are spelled correctly.</li><li translate="" class="ng-scope">Try a different search scope.</li><li translate="" class="ng-scope">Try different search terms.</li><li translate="" class="ng-scope">Try more general search terms.</li><li translate="" class="ng-scope">Try fewer search terms.</li></ul><p><strong><a href="http://www.library.northwestern.edu/research/ask-us/index.html">Contact a Research Librarian for Assistance</a></strong>.</p></md-card-content></md-card>'}),app.component("prmLoansOverviewAfter",{bindings:{},template:'<div class="tiles-grid-tile"><div class="tile-content layout-column" layout="column"><div class="tile-header layout-column" layout="column"><div class="layout-align-space-between-stretch layout-row" layout-align="space-between"><h2 class="header-link light-text"><span>Interlibrary Loan</span></h2></div></div><md-button class="button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row" type="button" layout="row" layout-align="center center" aria-label="view interlibrary loans checked out" style="" href="https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=66"><span>View Items Checked Out</span></md-button><md-button class="button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row" type="button" layout="row" layout-align="center center" aria-label="view interlibrary loans checked out" style="" href="https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=64"><span>View Items Available</span></md-button><md-button class="button-with-icon  overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row" type="button" layout="row" layout-align="center center" aria-label="view interlibrary loans checked out" style="" href="https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=62"><span>View Requests in Process</span></md-button></div></div>'}),app.controller("prmSearchResultAvailabilityLineAfterController",function($scope,$http,nodeserver){var vm=this;if($scope.book_icon="https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png",vm.parentCtrl.result.pnx.addata.doi&&"article"==vm.parentCtrl.result.pnx.display.type[0]){vm.doi=vm.parentCtrl.result.pnx.addata.doi[0]||"";var articleURL=nodeserver+"/articles?DOI="+vm.doi;$http.jsonp(articleURL,{jsonpCallbackParam:"callback"}).then(function(response){$scope.article=response.data},function(error){console.log(error)})}if(vm.parentCtrl.result.pnx.addata.issn&&"journal"==vm.parentCtrl.result.pnx.display.type[0]){vm.issn=vm.parentCtrl.result.pnx.addata.issn[0].replace("-","")||"";var journalURL=nodeserver+"/journals?ISSN="+vm.issn;$http.jsonp(journalURL,{jsonpCallbackParam:"callback"}).then(function(response){$scope.journal=response.data},function(error){console.log(error)})}}),app.component("prmSearchResultAvailabilityLineAfter",{bindings:{parentCtrl:"<"},controller:"prmSearchResultAvailabilityLineAfterController",template:'<div ng-if="article.data.browzineWebLink"><a href="{{ article.data.browzineWebLink }}" target="_blank" title="Via BrowZine"><img src="https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png" class="browzine-icon"> View Issue Contents <md-icon md-svg-icon="primo-ui:open-in-new" aria-label="icon-open-in-new" role="img" class="browzine-external-link"><svg id="open-in-new_cache29" width="100%" height="100%" viewBox="0 0 24 24" y="504" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"></svg></md-icon></a></div><div ng-if="journal.data[0].browzineWebLink"><a href="{{ journal.data[0].browzineWebLink }}" target="_blank" title="Via BrowZine"><img src="https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png" class="browzine-icon"> View Journal Contents <md-icon md-svg-icon="primo-ui:open-in-new" aria-label="icon-open-in-new" role="img" class="browzine-external-link"><svg id="open-in-new_cache29" width="100%" height="100%" viewBox="0 0 24 24" y="504" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"></svg></md-icon></a></div><hathi-trust-availability hide-online="true"></hathi-trust-availability>'}),app.controller("prmSearchResultThumbnailContainerAfterController",function($scope,$http,nodeserver){var vm=this,newThumbnail="";if(vm.parentCtrl.item&&vm.parentCtrl.item.pnx.addata.issn){vm.issn=vm.parentCtrl.item.pnx.addata.issn[0].replace("-","")||"";var journalURL=nodeserver+"/journals?ISSN="+vm.issn;$http.jsonp(journalURL,{jsonpCallbackParam:"callback"}).then(function(response){response.data.data[0]&&response.data.data[0].browzineEnabled&&(newThumbnail=response.data.data[0].coverImageUrl)},function(error){console.log(error)})}vm.$doCheck=function(changes){vm.parentCtrl.selectedThumbnailLink&&""!=newThumbnail&&(vm.parentCtrl.selectedThumbnailLink.linkURL=newThumbnail)}}),app.component("prmSearchResultThumbnailContainerAfter",{bindings:{parentCtrl:"<"},controller:"prmSearchResultThumbnailContainerAfterController"}),app.component("prmMessagesAndBlocksOverviewAfter",{bindings:{parentCtrl:"<"},template:'<div class="tiles-grid-tile"><div class="tile-content layout-column" layout="column"><div class="tile-header layout-column" layout="column"><div class="layout-align-space-between-stretch layout-row" layout="row" layout-align="space-between"><h2 class="header-link light-text"><span>NUPrint</span></h2></div></div><md-button class="button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row" type="button" layout="row" layout-align="center center" aria-label="view nuprint account" style="" href="https://nuprint.northwestern.edu/"><span>View Account</span></md-button></div></div>'}),app.controller("prmFacetRangeAfterController",[function(){try{this.query=this.parentCtrl.facetService.$location.$$search.query.split(",")[2]}catch(e){this.query=""}}]),app.component("prmFacetRangeAfter",{bindings:{parentCtrl:"<"},controller:"prmFacetRangeAfterController",template:'<md-card class="default-card zero-margin _md md-primoExplore-theme"><md-card-content><p><strong>Not finding the book you were looking for?</strong> Try searching items held at other libraries:</p><md-button class="md-raised md-button md-primoExplore-theme md-ink-ripple" href="http://www.worldcat.org/search?q={{$ctrl.query}}" type="button" aria-label="Search WorldCat" style="margin-left:0;margin-right:0;"> <img src="custom/NULV3/img/worldcat-logo.png" width="22" height="22" alt="worldcat-logo" style="vertical-align:middle;"> Search WorldCat</md-button><p><span>Looking for an article? Try <strong><a href="http://scholar.google.com/scholar?hl=en&q={{$ctrl.query}}">Google Scholar</a></strong></span>.</p><p></p><p>Other questions? <strong><a href="http://www.library.northwestern.edu/research/ask-us/index.html">Contact a Research Librarian for Assistance</a></strong>.</p></md-card-content></md-card>'}),app.component("prmSearchBarAfter",{bindings:{parentCtrl:"<"},controller:"SearchBarAfterController"}),app.controller("SearchBarAfterController",["angularLoad",function(angularLoad){this.parentCtrl.showTabsAndScopes=!0}]),angular.module("sendSms",["ngMaterial","primo-explore.components"]),angular.module("sendSms").component("addSmsAction",{require:{prmActionCtrl:"^prmActionList"},controller:["customActions","smsOptions",function(e,n){var t=this;this.$onInit=function(){e.actionExists(n.smsAction,t.prmActionCtrl)||e.addAction(n.smsAction,t.prmActionCtrl)},this.$onDestroy=function(){e.actionExists(n.smsAction,t.prmActionCtrl)&&e.removeAction(n.smsAction,t.prmActionCtrl)}}]}),angular.module("sendSms").factory("customActions",function(){return{addAction:function(e,n){this.actionExists(e,n)?console.error("Action already exists: ",e):(this.addActionIcon(e,n),n.actionListService.requiredActionsList.splice(e.index,0,e.name),n.actionListService.actionsToIndex[e.name]=e.index,n.actionListService.onToggle[e.name]=e.onToggle,n.actionListService.actionsToDisplay.unshift(e.name))},removeAction:function(e,n){if(this.actionExists(e,n)){this.removeActionIcon(e,n),delete n.actionListService.actionsToIndex[e.name],delete n.actionListService.onToggle[e.name];var t=n.actionListService.actionsToDisplay.indexOf(e.name);n.actionListService.actionsToDisplay.splice(t,1),t=n.actionListService.requiredActionsList.indexOf(e.name),n.actionListService.requiredActionsList.splice(t,1)}else console.error("Action does not exist: ",e)},addActionIcon:function(e,n){n.actionLabelNamesMap[e.name]=e.label,n.actionIconNamesMap[e.name]=e.name,n.actionIcons[e.name]=e.icon},removeActionIcon:function(e,n){delete n.actionLabelNamesMap[e.name],delete n.actionIconNamesMap[e.name],delete n.actionIcons[e.name]},actionExists:function(e,n){return n.actionListService.actionsToIndex.hasOwnProperty(e.name)}}}),angular.module("sendSms").component("ocaSendSms",{bindings:{item:"<",finishedSmsEvent:"&"},template:'<div class="send-actions-content-item" layout="row"><md-content layout-wrap layout-padding layout-fill><form name="smsForm" novalidate layout="column" layout-align="center center" (submit)="$ctrl.sendSms($event);"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding flex><div layout-margin><div layout="column"><h4 class="md-subhead">Standard message and data rates may apply.</h4><md-input-container class="underlined-input md-required"><label>Phone number:</label><input ng-model="$ctrl.phoneNumber" name="phoneNumber" type="text" required ng-pattern="::$ctrl.telRegEx"><div ng-messages="smsForm.phoneNumber.$error"><div ng-message="pattern, required ">phone number is invalid</div></div></md-input-container><md-input-container class="md-required"><label>Carrier:</label><md-select ng-model="$ctrl.carrier" name="carrier" placeholder="Select a carrier" required><md-option ng-repeat="(carrier, address) in carriers" value="{{ address }}">{{ carrier }}</md-option></md-select><div ng-messages="smsForm.carrier.$error"><div ng-message="required">please select a carrier</div></div></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.isCaptcha"><div vc-recaptcha key="$ctrl.getCaptchaPublicKey()"on-success="$ctrl.setResponse(response)"></div><span class="recaptcha-error-info" ng-show="smsForm.$submitted && (smsForm.recaptchaResponse.$invalid || smsForm.$error.recaptcha.length)"><span translate="captcha.notselected"></span></span></md-input-container></div></div></div><div flex="20" flex-sm="10" hide-xs></div>\n</div>\n<div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="Send the result by SMS"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span translate="email.popup.link.send"></span></md-button></div></div></form></md-content></div><prm-send-email ng-hide="true"></prm-send-email><oca-send-sms-after parent-ctrl="$ctrl"></oca-send-sms-after>',controller:["$scope","smsOptions",function(e,n){var t=this;this.$onInit=function(){e.$watch("$$childTail.$ctrl",function(e){return t.sendEmailService=e.sendEmailService}),e.carriers=n.smsCarriers,t.carrier=t.phoneNumber="",t.telRegEx=/^\d{3}( |-)?\d{3}( |-)?\d{4}$/},this.validate=function(){return t.telRegEx.test(t.phoneNumber)&&t.carrier},this.isCaptcha=function(){return"Y"==window.appConfig["system-configuration"]["Activate Captcha [Y/N]"]},this.getCaptchaPublicKey=function(){return window.appConfig["system-configuration"]["Public Captcha Key"]},this.setResponse=function(e){return t.gCaptchaResponse=e},this.sendSms=function(){t.validate()&&t.sendEmailService.sendEmail([t.phoneNumber+"@"+t.carrier],"","",[t.item],t.gCaptchaResponse).then(function(e){return console.log("sms successfully sent",e)}).catch(function(e){return console.error("sms sending failed",e)}).finally(function(){return t.finishedSmsEvent()})}}]}).run(["$templateCache","smsOptions",function(e,n){e.put("components/search/actions/actionContainer/action-container.html","\n  <oca-send-sms ng-if=\"($ctrl.actionName==='"+n.smsAction.name+'\')" finished-sms-event="$ctrl.throwCloseTabsEvent()" item="::$ctrl.item"></oca-send-sms>\n  <prm-send-email ng-if="($ctrl.actionName===\'E-mail\')" (finished-email-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [toggleform]="::$ctrl.toggleActionCotent" [user]="::\'\'"></prm-send-email>\n  <prm-citation ng-if="($ctrl.actionName===\'Citation\')" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-citation>\n  <prm-permalink ng-if="($ctrl.actionName===\'Permalink\')" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-permalink>\n  <prm-print-item ng-if="($ctrl.actionName===\'Print\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-print-item>\n  <prm-endnote ng-if="($ctrl.actionName===\'EndNote\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-endnote>\n  <prm-easybib ng-if="($ctrl.actionName===\'EasyBib\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-easybib>\n  <prm-refworks ng-if="($ctrl.actionName===\'RefWorks\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-refworks>\n  <prm-export-ris ng-if="($ctrl.actionName===\'RISPushTo\')" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-export-ris>\n  <prm-action-container-after parent-ctrl="$ctrl"></prm-action-container-after>')}]),angular.module("sendSms").value("smsOptions",{smsAction:{name:"send_sms",label:"SMS",index:9,icon:{icon:"ic_smartphone_24px",iconSet:"hardware",type:"svg"}},smsCarriers:{ATT:"txt.att.net","T-Mobile":"tmomail.net",Virgin:"vmobl.com",Sprint:"messaging.sprintpcs.com",Nextel:"messaging.nextel.com",Verizon:"vtext.com",Cricket:"mms.mycricket.com",Qwest:"qwestmp.com","Project Fi":"msg.fi.google.com"}}),app.component("prmActionListAfter",{template:"<add-sms-action />"}),angular.module("hathiTrustAvailability",[]).value("hathiTrustIconPath","custom/NULV3/img/hathitrust.svg").constant("hathiTrustBaseUrl","https://catalog.hathitrust.org/api/volumes/brief/json/").config(["$sceDelegateProvider","hathiTrustBaseUrl",function($sceDelegateProvider,hathiTrustBaseUrl){var urlWhitelist=$sceDelegateProvider.resourceUrlWhitelist();urlWhitelist.push(hathiTrustBaseUrl+"**"),$sceDelegateProvider.resourceUrlWhitelist(urlWhitelist)}]).factory("hathiTrust",["$http","$q",function($http,$q){var svc={};return svc.findFullViewRecord=function(ids){var deferred=$q.defer();if(ids.length){var hathiTrustLookupUrl="https://catalog.hathitrust.org/api/volumes/brief/json/"+ids.join("|");$http.jsonp(hathiTrustLookupUrl,{cache:!0,jsonpCallbackParam:"callback"}).then(function(resp){for(var data=resp.data,fullTextUrl=null,i=0;!fullTextUrl&&i<ids.length;i++)for(var result=data[ids[i]],j=0;j<result.items.length;j++){var item=result.items[j];if("full view"===item.usRightsString.toLowerCase()){fullTextUrl=result.records[item.fromRecord].recordURL;break}}deferred.resolve(fullTextUrl)}).catch(function(e){console.log(e)})}else deferred.resolve(null);return deferred.promise},svc}]).controller("hathiTrustAvailabilityController",["hathiTrust","hathiTrustIconPath",function(hathiTrust,hathiTrustIconPath){var self=this;self.hathiTrustIconPath=hathiTrustIconPath,self.$onInit=function(){setDefaults(),isOnline()&&self.hideOnline||updateHathiTrustAvailability()};var setDefaults=function(){self.msg||(self.msg="Full Text Available at HathiTrust")},isOnline=function(){return self.prmSearchResultAvailabilityLine.result.delivery.GetIt1.some(function(g){return g.links.some(function(l){return l.isLinktoOnline})})},updateHathiTrustAvailability=function(){var hathiTrustIds=(self.prmSearchResultAvailabilityLine.result.pnx.addata.oclcid||[]).map(function(id){return"oclc:"+id});hathiTrust.findFullViewRecord(hathiTrustIds).then(function(res){self.fullTextLink=res})}}]).component("hathiTrustAvailability",{require:{prmSearchResultAvailabilityLine:"^prmSearchResultAvailabilityLine"},bindings:{hideOnline:"<",msg:"@?"},controller:"hathiTrustAvailabilityController",template:'<span ng-if="$ctrl.fullTextLink" class="umnHathiTrustLink">                <md-icon md-svg-src="{{$ctrl.hathiTrustIconPath}}" alt="HathiTrust Logo"></md-icon>                <a target="_blank" ng-href="{{$ctrl.fullTextLink}}">                {{ ::$ctrl.msg }}                  <prm-icon external-link="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon>                </a>              </span>'})},{"./iframeResizer":1}]},{},[2]);
//# sourceMappingURL=custom.js.map
