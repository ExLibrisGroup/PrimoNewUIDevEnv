{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/HSLV/js/main.js"],"names":[],"mappings":"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","file":"custom.js","sourceRoot":"/source/","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// FIXME enable for browserify\n//const iFrameResize = require('./iframeResizer') ;\n\nvar app = app || angular.module(\n  'viewCustom', ['angularLoad', 'hathiTrustAvailability', 'sendSms']\n).constant(\n  'nodeserver', \"https://apiconnector.thirdiron.com/v1/libraries/72\"\n).config([\n  '$sceDelegateProvider',\n  'nodeserver',\n  function ($sceDelegateProvider, nodeserver) {\n    var urlWhitelist = $sceDelegateProvider.resourceUrlWhitelist();\n    urlWhitelist.push(nodeserver + '**');\n    $sceDelegateProvider.resourceUrlWhitelist(urlWhitelist);\n  }\n]);\n\napp.controller('prmLoginAlmaMashupAfterController',\n               ['$http', '$scope', '$sce', function ($http, $scope, $sce) {\n\n  $scope.sizeIframe = function () {\n    iFrameResize({log:true,checkOrigin:false},'.mashup-iframe');\n  }\n\n  var mashScope;\n  // Find the prm-alma-mashup scope.\n  // This is a horrid hack, but I seen no alternatives.\n  // There's no prm-alma-mashup-after to use.\n  function traverse(node) {\n    if (mashScope) return;\n    if (node.$ctrl) {\n      if (node.$ctrl.service) {\n        if (node.$ctrl.service.linkElement && node.$ctrl.service.linkElement.category === 'Alma-E') {\n          $scope.mashScope = node.$ctrl;\n          return;\n        }\n      }\n    }\n    if (node.$$childHead) traverse(node.$$childHead)\n    if (node.$$nextSibling) traverse(node.$$nextSibling)\n  }\n  traverse($scope.$root);\n\n  const LINK_TEMPLATE = 'http://local-dev.northwestern.edu:3000/search/results/view_it_primo?url=';\n  if ($scope.mashScope) {\n    var mashLink = $scope.mashScope.service.linkElement.links[0].link;\n    $scope.isLinkAvailable = false;\n    if (mashLink  && typeof mashLink !== 'undefined') {\n      $scope.mashLink = $sce.trustAsResourceUrl(\n        LINK_TEMPLATE + encodeURIComponent(mashLink)\n      );\n      $scope.isLinkAvailable = true;\n    }\n  }\n}]);\n\napp.component('prmLoginAlmaMashupAfter', {\n  controller: 'prmLoginAlmaMashupAfterController',\n  template: `\n  <div>\n    <iframe class=\"mashup-iframe\"\n            iframe-onload=\"{{sizeIframe()}}\"\n            ng-src=\"{{mashLink}}\"\n            style=\"width: 100%; border: none; overflow: hidden;\"\n            ng-if=\"isLinkAvailable\"\n            id=\"iFrameResizer1\"\n            scrolling=\"no\" />\n  </div>\n`\n});\n\n// Enhance No Results tile\n\napp.controller('prmNoSearchResultAfterController', [function () {\n  var vm = this;\n  vm.getSearchTerm = getSearchTerm;\n  function getSearchTerm() {\n    return vm.parentCtrl.term;\n  }\n}]);\n\napp.component('prmNoSearchResultAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmNoSearchResultAfterController',\n  template: '<md-card class=\"default-card zero-margin _md md-primoExplore-theme\"><md-card-title><md-card-title-text><span translate=\"\" class=\"md-headline ng-scope\">No records found.</span></md-card-title-text></md-card-title><md-card-content><p><span>There are no results matching your search: <i>{{$ctrl.getSearchTerm()}}</i>. Looking for a book? Try again searching items held at other libraries:</span></p><md-button class=\"md-raised md-button md-primoExplore-theme md-ink-ripple\" href=\"http://www.worldcat.org/search?q={{$ctrl.getSearchTerm()}}\" type=\"button\" aria-label=\"Search WorldCat\" style=\"margin-left:0;margin-right:0;\"> <img src=\"custom/NULV3/img/worldcat-logo.png\" width=\"22\" height=\"22\" alt=\"worldcat-logo\" style=\"vertical-align:middle;\"> Search WorldCat</md-button><p><span>Looking for an article? Try <strong><a href=\"http://scholar.google.com/scholar?hl=en&q={{$ctrl.getSearchTerm()}}\">Google Scholar</a></strong></span>.</p><p><span translate=\"\" class=\"bold-text ng-scope\">Suggestions:</span></p><ul><li translate=\"\" class=\"ng-scope\">Make sure that all words are spelled correctly.</li><li translate=\"\" class=\"ng-scope\">Try a different search scope.</li><li translate=\"\" class=\"ng-scope\">Try different search terms.</li><li translate=\"\" class=\"ng-scope\">Try more general search terms.</li><li translate=\"\" class=\"ng-scope\">Try fewer search terms.</li></ul><p><strong><a href=\"http://www.library.northwestern.edu/research/ask-us/index.html\">Contact a Research Librarian for Assistance</a></strong>.</p></md-card-content></md-card>'\n});\n\n//Add Interlibrary Loan links to My Account\n\napp.component('prmLoansOverviewAfter', {\n  bindings: {},\n  template: '<div class=\"tiles-grid-tile\"><div class=\"tile-content layout-column\" layout=\"column\"><div class=\"tile-header layout-column\" layout=\"column\"><div class=\"layout-align-space-between-stretch layout-row\" layout-align=\"space-between\"><h2 class=\"header-link light-text\"><span>Interlibrary Loan</span></h2></div></div><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view interlibrary loans checked out\" style=\"\" href=\"https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=66\"><span>View Items Checked Out</span></md-button><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view interlibrary loans checked out\" style=\"\" href=\"https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=64\"><span>View Items Available</span></md-button><md-button class=\"button-with-icon  overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view interlibrary loans checked out\" style=\"\" href=\"https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=62\"><span>View Requests in Process</span></md-button></div></div>'\n});\n\n//End add ILL links\n\n// Check for content in Browzine\n\napp.controller('prmSearchResultAvailabilityLineAfterController', function ($scope, $http, nodeserver) {\n  var vm = this;\n  $scope.book_icon = \"https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png\";\n  if (vm.parentCtrl.result.pnx.addata.doi && vm.parentCtrl.result.pnx.display.type[0] == 'article') {\n    vm.doi = vm.parentCtrl.result.pnx.addata.doi[0] || '';\n    var articleURL = nodeserver + \"/articles?DOI=\" + vm.doi;\n    $http.jsonp(articleURL, { jsonpCallbackParam: 'callback' }).then(function (response) {\n      $scope.article = response.data;\n    }, function (error) {\n      console.log(error);\n    });\n  }\n  if (vm.parentCtrl.result.pnx.addata.issn && vm.parentCtrl.result.pnx.display.type[0] == 'journal') {\n    vm.issn = vm.parentCtrl.result.pnx.addata.issn[0].replace(\"-\", \"\") || '';\n    var journalURL = nodeserver + \"/journals?ISSN=\" + vm.issn;\n    $http.jsonp(journalURL, { jsonpCallbackParam: 'callback' }).then(function (response) {\n      $scope.journal = response.data;\n    }, function (error) {\n      console.log(error);\n    });\n  }\n});\n\n//Add Browzine and Hathitrust links to Brief Results\n\napp.component('prmSearchResultAvailabilityLineAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmSearchResultAvailabilityLineAfterController',\n  template: '<div ng-if=\"article.data.browzineWebLink\"><a href=\"{{ article.data.browzineWebLink }}\" target=\"_blank\" title=\"Via BrowZine\"><img src=\"https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png\" class=\"browzine-icon\"> View Issue Contents <md-icon md-svg-icon=\"primo-ui:open-in-new\" aria-label=\"icon-open-in-new\" role=\"img\" class=\"browzine-external-link\"><svg id=\"open-in-new_cache29\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" y=\"504\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"></svg></md-icon></a></div><div ng-if=\"journal.data[0].browzineWebLink\"><a href=\"{{ journal.data[0].browzineWebLink }}\" target=\"_blank\" title=\"Via BrowZine\"><img src=\"https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png\" class=\"browzine-icon\"> View Journal Contents <md-icon md-svg-icon=\"primo-ui:open-in-new\" aria-label=\"icon-open-in-new\" role=\"img\" class=\"browzine-external-link\"><svg id=\"open-in-new_cache29\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" y=\"504\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"></svg></md-icon></a></div><hathi-trust-availability hide-online=\"true\"></hathi-trust-availability>'\n});\n\n// Add Journal Cover Images from BrowZine\n\napp.controller('prmSearchResultThumbnailContainerAfterController', function ($scope, $http, nodeserver) {\n  var vm = this;\n  var newThumbnail = '';\n  // checking for item property as this seems to impact virtual shelf browse (for reasons as yet unknown)\n  if (vm.parentCtrl.item && vm.parentCtrl.item.pnx.addata.issn) {\n    vm.issn = vm.parentCtrl.item.pnx.addata.issn[0].replace(\"-\", \"\") || '';\n    var journalURL = nodeserver + \"/journals?ISSN=\" + vm.issn;\n    $http.jsonp(journalURL, { jsonpCallbackParam: 'callback' }).then(function (response) {\n      if (response.data.data[\"0\"] && response.data.data[\"0\"].browzineEnabled) {\n        newThumbnail = response.data.data[\"0\"].coverImageUrl;\n      }\n    }, function (error) {\n      console.log(error); //\n    });\n  }\n  vm.$doCheck = function (changes) {\n    if (vm.parentCtrl.selectedThumbnailLink) {\n      if (newThumbnail != '') {\n        vm.parentCtrl.selectedThumbnailLink.linkURL = newThumbnail;\n      }\n    }\n  };\n});\n\napp.component('prmSearchResultThumbnailContainerAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmSearchResultThumbnailContainerAfterController'\n});\n\n// End BrowZine - Primo Integration\n\n//Logo with link\n\n/*\napp.controller('prmLogoAfterController', [function () {\n  var ctrl = this;\n\n  ctrl.getIconLink = function () {\n    return ctrl.parentCtrl.iconLink;\n  };\n}]);\n\napp.component('prmLogoAfter', {\n  bindings: {\n    parentCtrl: '<'\n  },\n  controller: 'prmLogoAfterController',\n  template: ' \\n    <div class=\"product-logo product-logo-local\" layout=\"row\" layout-align=\"start center\" layout-fill id=\"banner\" tabindex=\"0\" role=\"banner\"><a href=\"http://www.library.northwestern.edu/\"><img ng-src=\"{{$ctrl.getIconLink()}}\" alt=\"{{(\\'nui.header.LogoAlt\\' | translate)}}\"/></a>\\n    </div>\\n  '\n});\n*/\n\n//End add logo with link\n\n\n//Add NUPrint link to account\n\napp.component('prmMessagesAndBlocksOverviewAfter', {\n  bindings: { parentCtrl: '<' },\n  template: '<div class=\"tiles-grid-tile\"><div class=\"tile-content layout-column\" layout=\"column\"><div class=\"tile-header layout-column\" layout=\"column\"><div class=\"layout-align-space-between-stretch layout-row\" layout=\"row\" layout-align=\"space-between\"><h2 class=\"header-link light-text\"><span>NUPrint</span></h2></div></div><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view nuprint account\" style=\"\" href=\"https://nuprint.northwestern.edu/\"><span>View Account</span></md-button></div></div>'\n});\n\n//End Add NUPrint\n//Other search options\n\napp.controller('prmFacetRangeAfterController', [function () {\n  try {\n    this.query = this.parentCtrl.facetService.$location.$$search.query.split(\",\")[2];\n  } catch (e) {\n    this.query = \"\";\n  }\n}]);\n\napp.component('prmFacetRangeAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmFacetRangeAfterController',\n  template: '<md-card class=\"default-card zero-margin _md md-primoExplore-theme\"><md-card-content><p><strong>Not finding the book you were looking for?</strong> Try searching items held at other libraries:</p><md-button class=\"md-raised md-button md-primoExplore-theme md-ink-ripple\" href=\"http://www.worldcat.org/search?q={{$ctrl.query}}\" type=\"button\" aria-label=\"Search WorldCat\" style=\"margin-left:0;margin-right:0;\"> <img src=\"custom/NULV3/img/worldcat-logo.png\" width=\"22\" height=\"22\" alt=\"worldcat-logo\" style=\"vertical-align:middle;\"> Search WorldCat</md-button><p><span>Looking for an article? Try <strong><a href=\"http://scholar.google.com/scholar?hl=en&q={{$ctrl.query}}\">Google Scholar</a></strong></span>.</p><p></p><p>Other questions? <strong><a href=\"http://www.library.northwestern.edu/research/ask-us/index.html\">Contact a Research Librarian for Assistance</a></strong>.</p></md-card-content></md-card>'\n});\n\n//Always display scope dropdown for basic searches\n\napp.component('prmSearchBarAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'SearchBarAfterController'\n});\n\napp.controller('SearchBarAfterController', ['angularLoad', function (angularLoad) {\n  var vm = this;\n  vm.parentCtrl.showTabsAndScopes = true;\n}]);\n\n//End display scopes\n\n//Add SMS actions menu\n\n'use strict';\n\nangular.module(\"sendSms\", [\"ngMaterial\", \"primo-explore.components\"]), angular.module(\"sendSms\").component(\"addSmsAction\", {\n  require: { prmActionCtrl: \"^prmActionList\" },\n  controller: [\"customActions\", \"smsOptions\", function (e, n) {\n    var t = this;\n    this.$onInit = function () {\n      e.actionExists(n.smsAction, t.prmActionCtrl) || e.addAction(n.smsAction, t.prmActionCtrl);\n    }, this.$onDestroy = function () {\n      e.actionExists(n.smsAction, t.prmActionCtrl) && e.removeAction(n.smsAction, t.prmActionCtrl);\n    };\n  }]\n}), angular.module(\"sendSms\").factory(\"customActions\", function () {\n  return {\n    addAction: function addAction(e, n) {\n      this.actionExists(e, n) ? console.error(\"Action already exists: \", e) : (this.addActionIcon(e, n), n.actionListService.requiredActionsList.splice(e.index, 0, e.name), n.actionListService.actionsToIndex[e.name] = e.index, n.actionListService.onToggle[e.name] = e.onToggle, n.actionListService.actionsToDisplay.unshift(e.name));\n    },\n    removeAction: function removeAction(e, n) {\n      if (this.actionExists(e, n)) {\n        this.removeActionIcon(e, n), delete n.actionListService.actionsToIndex[e.name], delete n.actionListService.onToggle[e.name];\n        var t = n.actionListService.actionsToDisplay.indexOf(e.name);\n        n.actionListService.actionsToDisplay.splice(t, 1), t = n.actionListService.requiredActionsList.indexOf(e.name), n.actionListService.requiredActionsList.splice(t, 1);\n      } else console.error(\"Action does not exist: \", e);\n    },\n    addActionIcon: function addActionIcon(e, n) {\n      n.actionLabelNamesMap[e.name] = e.label, n.actionIconNamesMap[e.name] = e.name, n.actionIcons[e.name] = e.icon;\n    },\n    removeActionIcon: function removeActionIcon(e, n) {\n      delete n.actionLabelNamesMap[e.name], delete n.actionIconNamesMap[e.name], delete n.actionIcons[e.name];\n    },\n    actionExists: function actionExists(e, n) {\n      return n.actionListService.actionsToIndex.hasOwnProperty(e.name);\n    }\n  };\n}), angular.module(\"sendSms\").component(\"ocaSendSms\", {\n  bindings: { item: \"<\", finishedSmsEvent: \"&\" },\n  template: '<div class=\"send-actions-content-item\" layout=\"row\"><md-content layout-wrap layout-padding layout-fill><form name=\"smsForm\" novalidate layout=\"column\" layout-align=\"center center\" (submit)=\"$ctrl.sendSms($event);\"><div layout=\"row\" class=\"layout-full-width\" layout-align=\"center center\"><div flex=\"20\" flex-sm=\"10\" hide-xs></div><div class=\"form-focus service-form\" layout-padding flex><div layout-margin><div layout=\"column\"><h4 class=\"md-subhead\">Standard message and data rates may apply.</h4><md-input-container class=\"underlined-input md-required\"><label>Phone number:</label><input ng-model=\"$ctrl.phoneNumber\" name=\"phoneNumber\" type=\"text\" required ng-pattern=\"::$ctrl.telRegEx\"><div ng-messages=\"smsForm.phoneNumber.$error\"><div ng-message=\"pattern, required \">phone number is invalid</div></div></md-input-container><md-input-container class=\"md-required\"><label>Carrier:</label><md-select ng-model=\"$ctrl.carrier\" name=\"carrier\" placeholder=\"Select a carrier\" required><md-option ng-repeat=\"(carrier, address) in carriers\" value=\"{{ address }}\">{{ carrier }}</md-option></md-select><div ng-messages=\"smsForm.carrier.$error\"><div ng-message=\"required\">please select a carrier</div></div></md-input-container><md-input-container class=\"underlined-input\" ng-if=\"$ctrl.isCaptcha\"><div vc-recaptcha key=\"$ctrl.getCaptchaPublicKey()\"on-success=\"$ctrl.setResponse(response)\"></div><span class=\"recaptcha-error-info\" ng-show=\"smsForm.$submitted && (smsForm.recaptchaResponse.$invalid || smsForm.$error.recaptcha.length)\"><span translate=\"captcha.notselected\"></span></span></md-input-container></div></div></div><div flex=\"20\" flex-sm=\"10\" hide-xs></div>\\n</div>\\n<div layout=\"row\"><div layout=\"row\" layout-align=\"center\" layout-fill><md-button type=\"submit\" class=\"button-with-icon button-large button-confirm\" aria-label=\"Send the result by SMS\"><prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"send\"></prm-icon><span translate=\"email.popup.link.send\"></span></md-button></div></div></form></md-content></div><prm-send-email ng-hide=\"true\"></prm-send-email><oca-send-sms-after parent-ctrl=\"$ctrl\"></oca-send-sms-after>',\n  controller: [\"$scope\", \"smsOptions\", function (e, n) {\n    var t = this;\n    this.$onInit = function () {\n      e.$watch(\"$$childTail.$ctrl\", function (e) {\n        return t.sendEmailService = e.sendEmailService;\n      }), e.carriers = n.smsCarriers, t.carrier = t.phoneNumber = \"\", t.telRegEx = /^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/;\n    }, this.validate = function () {\n      return t.telRegEx.test(t.phoneNumber) && t.carrier;\n    }, this.isCaptcha = function () {\n      return \"Y\" == window.appConfig[\"system-configuration\"][\"Activate Captcha [Y/N]\"];\n    }, this.getCaptchaPublicKey = function () {\n      return window.appConfig[\"system-configuration\"][\"Public Captcha Key\"];\n    }, this.setResponse = function (e) {\n      return t.gCaptchaResponse = e;\n    }, this.sendSms = function () {\n      t.validate() && t.sendEmailService.sendEmail([t.phoneNumber + \"@\" + t.carrier], \"\", \"\", [t.item], t.gCaptchaResponse).then(function (e) {\n        return console.log(\"sms successfully sent\", e);\n      }).catch(function (e) {\n        return console.error(\"sms sending failed\", e);\n      }).finally(function () {\n        return t.finishedSmsEvent();\n      });\n    };\n  }]\n}).run([\"$templateCache\", \"smsOptions\", function (e, n) {\n  e.put(\"components/search/actions/actionContainer/action-container.html\", \"\\n  <oca-send-sms ng-if=\\\"($ctrl.actionName==='\" + n.smsAction.name + '\\')\" finished-sms-event=\"$ctrl.throwCloseTabsEvent()\" item=\"::$ctrl.item\"></oca-send-sms>\\n  <prm-send-email ng-if=\"($ctrl.actionName===\\'E-mail\\')\" (finished-email-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [toggleform]=\"::$ctrl.toggleActionCotent\" [user]=\"::\\'\\'\"></prm-send-email>\\n  <prm-citation ng-if=\"($ctrl.actionName===\\'Citation\\')\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-citation>\\n  <prm-permalink ng-if=\"($ctrl.actionName===\\'Permalink\\')\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-permalink>\\n  <prm-print-item ng-if=\"($ctrl.actionName===\\'Print\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-print-item>\\n  <prm-endnote ng-if=\"($ctrl.actionName===\\'EndNote\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-endnote>\\n  <prm-easybib ng-if=\"($ctrl.actionName===\\'EasyBib\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-easybib>\\n  <prm-refworks ng-if=\"($ctrl.actionName===\\'RefWorks\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-refworks>\\n  <prm-export-ris ng-if=\"($ctrl.actionName===\\'RISPushTo\\')\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-export-ris>\\n  <prm-action-container-after parent-ctrl=\"$ctrl\"></prm-action-container-after>');\n}]), angular.module(\"sendSms\").value(\"smsOptions\", { smsAction: { name: \"send_sms\", label: \"SMS\", index: 9, icon: { icon: \"ic_smartphone_24px\", iconSet: \"hardware\", type: \"svg\" } }, smsCarriers: { ATT: \"txt.att.net\", \"T-Mobile\": \"tmomail.net\", Virgin: \"vmobl.com\", Sprint: \"messaging.sprintpcs.com\", Nextel: \"messaging.nextel.com\", Verizon: \"vtext.com\", Cricket: \"mms.mycricket.com\", Qwest: \"qwestmp.com\", \"Project Fi\": \"msg.fi.google.com\" } });\n\napp.component('prmActionListAfter', {\n  template: '<add-sms-action />'\n});\n\n//end SMS \n\n//HathiTrust availability link\n\nangular.module('hathiTrustAvailability', []).value('hathiTrustIconPath', 'custom/NULV3/img/hathitrust.svg').constant('hathiTrustBaseUrl', \"https://catalog.hathitrust.org/api/volumes/brief/json/\").config(['$sceDelegateProvider', 'hathiTrustBaseUrl', function ($sceDelegateProvider, hathiTrustBaseUrl) {\n  var urlWhitelist = $sceDelegateProvider.resourceUrlWhitelist();\n  urlWhitelist.push(hathiTrustBaseUrl + '**');\n  $sceDelegateProvider.resourceUrlWhitelist(urlWhitelist);\n}]).factory('hathiTrust', ['$http', '$q', function ($http, $q) {\n  var svc = {};\n  var hathiTrustBaseUrl = \"https://catalog.hathitrust.org/api/volumes/brief/json/\";\n\n  svc.findFullViewRecord = function (ids) {\n    var deferred = $q.defer();\n\n    var handleResponse = function handleResponse(resp) {\n      var data = resp.data;\n      var fullTextUrl = null;\n      for (var i = 0; !fullTextUrl && i < ids.length; i++) {\n        var result = data[ids[i]];\n        for (var j = 0; j < result.items.length; j++) {\n          var item = result.items[j];\n          if (item.usRightsString.toLowerCase() === \"full view\") {\n            fullTextUrl = result.records[item.fromRecord].recordURL;\n            break;\n          }\n        }\n      }\n      deferred.resolve(fullTextUrl);\n    };\n\n    if (ids.length) {\n      var hathiTrustLookupUrl = hathiTrustBaseUrl + ids.join('|');\n      $http.jsonp(hathiTrustLookupUrl, { cache: true, jsonpCallbackParam: 'callback' }).then(handleResponse).catch(function (e) {\n        console.log(e);\n      });\n    } else {\n      deferred.resolve(null);\n    }\n\n    return deferred.promise;\n  };\n\n  return svc;\n}]).controller('hathiTrustAvailabilityController', ['hathiTrust', 'hathiTrustIconPath', function (hathiTrust, hathiTrustIconPath) {\n  var self = this;\n  self.hathiTrustIconPath = hathiTrustIconPath;\n\n  self.$onInit = function () {\n    setDefaults();\n    if (!(isOnline() && self.hideOnline)) {\n      updateHathiTrustAvailability();\n    }\n  };\n\n  var setDefaults = function setDefaults() {\n    if (!self.msg) self.msg = 'Full Text Available at HathiTrust';\n  };\n\n  var isOnline = function isOnline() {\n    return self.prmSearchResultAvailabilityLine.result.delivery.GetIt1.some(function (g) {\n      return g.links.some(function (l) {\n        return l.isLinktoOnline;\n      });\n    });\n  };\n\n  var updateHathiTrustAvailability = function updateHathiTrustAvailability() {\n    var hathiTrustIds = (self.prmSearchResultAvailabilityLine.result.pnx.addata.oclcid || []).map(function (id) {\n      return \"oclc:\" + id;\n    });\n    hathiTrust.findFullViewRecord(hathiTrustIds).then(function (res) {\n      self.fullTextLink = res;\n    });\n  };\n}]).component('hathiTrustAvailability', {\n  require: {\n    prmSearchResultAvailabilityLine: '^prmSearchResultAvailabilityLine'\n  },\n  bindings: {\n    hideOnline: '<',\n    msg: '@?'\n  },\n  controller: 'hathiTrustAvailabilityController',\n  template: '<span ng-if=\"$ctrl.fullTextLink\" class=\"umnHathiTrustLink\">\\\n                <md-icon md-svg-src=\"{{$ctrl.hathiTrustIconPath}}\" alt=\"HathiTrust Logo\"></md-icon>\\\n                <a target=\"_blank\" ng-href=\"{{$ctrl.fullTextLink}}\">\\\n                {{ ::$ctrl.msg }}\\\n                  <prm-icon external-link=\"\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\\\n                </a>\\\n              </span>'\n});\n\n/* Ghetto iFrameResizer declaration! */\n!function(a){\"use strict\";function b(b,c,d){\"addEventListener\"in a?b.addEventListener(c,d,!1):\"attachEvent\"in a&&b.attachEvent(\"on\"+c,d)}function c(b,c,d){\"removeEventListener\"in a?b.removeEventListener(c,d,!1):\"detachEvent\"in a&&b.detachEvent(\"on\"+c,d)}function d(){var b,c=[\"moz\",\"webkit\",\"o\",\"ms\"];for(b=0;b<c.length&&!N;b+=1)N=a[c[b]+\"RequestAnimationFrame\"];N||h(\"setup\",\"RequestAnimationFrame not supported\")}function e(b){var c=\"Host page: \"+b;return a.top!==a.self&&(c=a.parentIFrame&&a.parentIFrame.getId?a.parentIFrame.getId()+\": \"+b:\"Nested host page: \"+b),c}function f(a){return K+\"[\"+e(a)+\"]\"}function g(a){return P[a]?P[a].log:G}function h(a,b){k(\"log\",a,b,g(a))}function i(a,b){k(\"info\",a,b,g(a))}function j(a,b){k(\"warn\",a,b,!0)}function k(b,c,d,e){!0===e&&\"object\"==typeof a.console&&console[b](f(c),d)}function l(d){function e(){function a(){s(V),p(W)}g(\"Height\"),g(\"Width\"),t(a,V,\"init\")}function f(){var a=U.substr(L).split(\":\");return{iframe:P[a[0]].iframe,id:a[0],height:a[1],width:a[2],type:a[3]}}function g(a){var b=Number(P[W][\"max\"+a]),c=Number(P[W][\"min\"+a]),d=a.toLowerCase(),e=Number(V[d]);h(W,\"Checking \"+d+\" is in range \"+c+\"-\"+b),c>e&&(e=c,h(W,\"Set \"+d+\" to min value\")),e>b&&(e=b,h(W,\"Set \"+d+\" to max value\")),V[d]=\"\"+e}function k(){function a(){function a(){var a=0,d=!1;for(h(W,\"Checking connection is from allowed list of origins: \"+c);a<c.length;a++)if(c[a]===b){d=!0;break}return d}function d(){var a=P[W].remoteHost;return h(W,\"Checking connection is from: \"+a),b===a}return c.constructor===Array?a():d()}var b=d.origin,c=P[W].checkOrigin;if(c&&\"\"+b!=\"null\"&&!a())throw new Error(\"Unexpected message received from: \"+b+\" for \"+V.iframe.id+\". Message was: \"+d.data+\". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.\");return!0}function l(){return K===(\"\"+U).substr(0,L)&&U.substr(L).split(\":\")[0]in P}function w(){var a=V.type in{\"true\":1,\"false\":1,undefined:1};return a&&h(W,\"Ignoring init message from meta parent page\"),a}function y(a){return U.substr(U.indexOf(\":\")+J+a)}function z(a){h(W,\"MessageCallback passed: {iframe: \"+V.iframe.id+\", message: \"+a+\"}\"),N(\"messageCallback\",{iframe:V.iframe,message:JSON.parse(a)}),h(W,\"--\")}function A(){var b=document.body.getBoundingClientRect(),c=V.iframe.getBoundingClientRect();return JSON.stringify({clientHeight:Math.max(document.documentElement.clientHeight,a.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,a.innerWidth||0),offsetTop:parseInt(c.top-b.top,10),offsetLeft:parseInt(c.left-b.left,10),scrollTop:a.pageYOffset,scrollLeft:a.pageXOffset})}function B(a,b){function c(){u(\"Send Page Info\",\"pageInfo:\"+A(),a,b)}x(c,32)}function C(){function d(b,c){function d(){P[g]?B(P[g].iframe,g):e()}[\"scroll\",\"resize\"].forEach(function(e){h(g,b+e+\" listener for sendPageInfo\"),c(a,e,d)})}function e(){d(\"Remove \",c)}function f(){d(\"Add \",b)}var g=W;f(),P[g].stopPageInfo=e}function D(){P[W]&&P[W].stopPageInfo&&(P[W].stopPageInfo(),delete P[W].stopPageInfo)}function E(){var a=!0;return null===V.iframe&&(j(W,\"IFrame (\"+V.id+\") not found\"),a=!1),a}function F(a){var b=a.getBoundingClientRect();return o(W),{x:Math.floor(Number(b.left)+Number(M.x)),y:Math.floor(Number(b.top)+Number(M.y))}}function G(b){function c(){M=g,H(),h(W,\"--\")}function d(){return{x:Number(V.width)+f.x,y:Number(V.height)+f.y}}function e(){a.parentIFrame?a.parentIFrame[\"scrollTo\"+(b?\"Offset\":\"\")](g.x,g.y):j(W,\"Unable to scroll to requested position, window.parentIFrame not found\")}var f=b?F(V.iframe):{x:0,y:0},g=d();h(W,\"Reposition requested from iFrame (offset x:\"+f.x+\" y:\"+f.y+\")\"),a.top!==a.self?e():c()}function H(){!1!==N(\"scrollCallback\",M)?p(W):q()}function I(b){function c(){var a=F(g);h(W,\"Moving to in page link (#\"+e+\") at x: \"+a.x+\" y: \"+a.y),M={x:a.x,y:a.y},H(),h(W,\"--\")}function d(){a.parentIFrame?a.parentIFrame.moveToAnchor(e):h(W,\"In page link #\"+e+\" not found and window.parentIFrame not found\")}var e=b.split(\"#\")[1]||\"\",f=decodeURIComponent(e),g=document.getElementById(f)||document.getElementsByName(f)[0];g?c():a.top!==a.self?d():h(W,\"In page link #\"+e+\" not found\")}function N(a,b){return m(W,a,b)}function O(){switch(P[W].firstRun&&T(),V.type){case\"close\":n(V.iframe);break;case\"message\":z(y(6));break;case\"scrollTo\":G(!1);break;case\"scrollToOffset\":G(!0);break;case\"pageInfo\":B(P[W].iframe,W),C();break;case\"pageInfoStop\":D();break;case\"inPageLink\":I(y(9));break;case\"reset\":r(V);break;case\"init\":e(),N(\"initCallback\",V.iframe),N(\"resizedCallback\",V);break;default:e(),N(\"resizedCallback\",V)}}function Q(a){var b=!0;return P[a]||(b=!1,j(V.type+\" No settings for \"+a+\". Message was: \"+U)),b}function S(){for(var a in P)u(\"iFrame requested init\",v(a),document.getElementById(a),a)}function T(){P[W].firstRun=!1}var U=d.data,V={},W=null;\"[iFrameResizerChild]Ready\"===U?S():l()?(V=f(),W=R=V.id,!w()&&Q(W)&&(h(W,\"Received: \"+U),E()&&k()&&O())):i(W,\"Ignored: \"+U)}function m(a,b,c){var d=null,e=null;if(P[a]){if(d=P[a][b],\"function\"!=typeof d)throw new TypeError(b+\" on iFrame[\"+a+\"] is not a function\");e=d(c)}return e}function n(a){var b=a.id;h(b,\"Removing iFrame: \"+b),a.parentNode.removeChild(a),m(b,\"closedCallback\",b),h(b,\"--\"),delete P[b]}function o(b){null===M&&(M={x:void 0!==a.pageXOffset?a.pageXOffset:document.documentElement.scrollLeft,y:void 0!==a.pageYOffset?a.pageYOffset:document.documentElement.scrollTop},h(b,\"Get page position: \"+M.x+\",\"+M.y))}function p(b){null!==M&&(a.scrollTo(M.x,M.y),h(b,\"Set page position: \"+M.x+\",\"+M.y),q())}function q(){M=null}function r(a){function b(){s(a),u(\"reset\",\"reset\",a.iframe,a.id)}h(a.id,\"Size reset requested by \"+(\"init\"===a.type?\"host page\":\"iFrame\")),o(a.id),t(b,a,\"reset\")}function s(a){function b(b){a.iframe.style[b]=a[b]+\"px\",h(a.id,\"IFrame (\"+e+\") \"+b+\" set to \"+a[b]+\"px\")}function c(b){H||\"0\"!==a[b]||(H=!0,h(e,\"Hidden iFrame detected, creating visibility listener\"),y())}function d(a){b(a),c(a)}var e=a.iframe.id;P[e]&&(P[e].sizeHeight&&d(\"height\"),P[e].sizeWidth&&d(\"width\"))}function t(a,b,c){c!==b.type&&N?(h(b.id,\"Requesting animation frame\"),N(a)):a()}function u(a,b,c,d){function e(){var e=P[d].targetOrigin;h(d,\"[\"+a+\"] Sending msg to iframe[\"+d+\"] (\"+b+\") targetOrigin: \"+e),c.contentWindow.postMessage(K+b,e)}function f(){i(d,\"[\"+a+\"] IFrame(\"+d+\") not found\"),P[d]&&delete P[d]}function g(){c&&\"contentWindow\"in c&&null!==c.contentWindow?e():f()}d=d||c.id,P[d]&&g()}function v(a){return a+\":\"+P[a].bodyMarginV1+\":\"+P[a].sizeWidth+\":\"+P[a].log+\":\"+P[a].interval+\":\"+P[a].enablePublicMethods+\":\"+P[a].autoResize+\":\"+P[a].bodyMargin+\":\"+P[a].heightCalculationMethod+\":\"+P[a].bodyBackground+\":\"+P[a].bodyPadding+\":\"+P[a].tolerance+\":\"+P[a].inPageLinks+\":\"+P[a].resizeFrom+\":\"+P[a].widthCalculationMethod}function w(a,c){function d(){function b(b){1/0!==P[w][b]&&0!==P[w][b]&&(a.style[b]=P[w][b]+\"px\",h(w,\"Set \"+b+\" = \"+P[w][b]+\"px\"))}function c(a){if(P[w][\"min\"+a]>P[w][\"max\"+a])throw new Error(\"Value for min\"+a+\" can not be greater than max\"+a)}c(\"Height\"),c(\"Width\"),b(\"maxHeight\"),b(\"minHeight\"),b(\"maxWidth\"),b(\"minWidth\")}function e(){var a=c&&c.id||S.id+F++;return null!==document.getElementById(a)&&(a+=F++),a}function f(b){return R=b,\"\"===b&&(a.id=b=e(),G=(c||{}).log,R=b,h(b,\"Added missing iframe ID: \"+b+\" (\"+a.src+\")\")),b}function g(){h(w,\"IFrame scrolling \"+(P[w].scrolling?\"enabled\":\"disabled\")+\" for \"+w),a.style.overflow=!1===P[w].scrolling?\"hidden\":\"auto\",a.scrolling=!1===P[w].scrolling?\"no\":\"yes\"}function i(){(\"number\"==typeof P[w].bodyMargin||\"0\"===P[w].bodyMargin)&&(P[w].bodyMarginV1=P[w].bodyMargin,P[w].bodyMargin=\"\"+P[w].bodyMargin+\"px\")}function k(){var b=P[w].firstRun,c=P[w].heightCalculationMethod in O;!b&&c&&r({iframe:a,height:0,width:0,type:\"init\"})}function l(){Function.prototype.bind&&(P[w].iframe.iFrameResizer={close:n.bind(null,P[w].iframe),resize:u.bind(null,\"Window resize\",\"resize\",P[w].iframe),moveToAnchor:function(a){u(\"Move to anchor\",\"inPageLink:\"+a,P[w].iframe,w)},sendMessage:function(a){a=JSON.stringify(a),u(\"Send Message\",\"message:\"+a,P[w].iframe,w)}})}function m(c){function d(){u(\"iFrame.onload\",c,a),k()}b(a,\"load\",d),u(\"init\",c,a)}function o(a){if(\"object\"!=typeof a)throw new TypeError(\"Options is not an object\")}function p(a){for(var b in S)S.hasOwnProperty(b)&&(P[w][b]=a.hasOwnProperty(b)?a[b]:S[b])}function q(a){return\"\"===a||\"file://\"===a?\"*\":a}function s(b){b=b||{},P[w]={firstRun:!0,iframe:a,remoteHost:a.src.split(\"/\").slice(0,3).join(\"/\")},o(b),p(b),P[w].targetOrigin=!0===P[w].checkOrigin?q(P[w].remoteHost):\"*\"}function t(){return w in P&&\"iFrameResizer\"in a}var w=f(a.id);t()?j(w,\"Ignored iFrame, already setup.\"):(s(c),g(),d(),i(),m(v(w)),l())}function x(a,b){null===Q&&(Q=setTimeout(function(){Q=null,a()},b))}function y(){function b(){function a(a){function b(b){return\"0px\"===P[a].iframe.style[b]}function c(a){return null!==a.offsetParent}c(P[a].iframe)&&(b(\"height\")||b(\"width\"))&&u(\"Visibility change\",\"resize\",P[a].iframe,a)}for(var b in P)a(b)}function c(a){h(\"window\",\"Mutation observed: \"+a[0].target+\" \"+a[0].type),x(b,16)}function d(){var a=document.querySelector(\"body\"),b={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},d=new e(c);d.observe(a,b)}var e=a.MutationObserver||a.WebKitMutationObserver;e&&d()}function z(a){function b(){B(\"Window \"+a,\"resize\")}h(\"window\",\"Trigger event: \"+a),x(b,16)}function A(){function a(){B(\"Tab Visable\",\"resize\")}\"hidden\"!==document.visibilityState&&(h(\"document\",\"Trigger event: Visiblity change\"),x(a,16))}function B(a,b){function c(a){return\"parent\"===P[a].resizeFrom&&P[a].autoResize&&!P[a].firstRun}for(var d in P)c(d)&&u(a,b,document.getElementById(d),d)}function C(){b(a,\"message\",l),b(a,\"resize\",function(){z(\"resize\")}),b(document,\"visibilitychange\",A),b(document,\"-webkit-visibilitychange\",A),b(a,\"focusin\",function(){z(\"focus\")}),b(a,\"focus\",function(){z(\"focus\")})}function D(){function a(a,c){function d(){if(!c.tagName)throw new TypeError(\"Object is not a valid DOM element\");if(\"IFRAME\"!==c.tagName.toUpperCase())throw new TypeError(\"Expected <IFRAME> tag, found <\"+c.tagName+\">\")}c&&(d(),w(c,a),b.push(c))}var b;return d(),C(),function(c,d){switch(b=[],typeof d){case\"undefined\":case\"string\":Array.prototype.forEach.call(document.querySelectorAll(d||\"iframe\"),a.bind(void 0,c));break;case\"object\":a(c,d);break;default:throw new TypeError(\"Unexpected data type (\"+typeof d+\")\")}return b}}function E(a){a.fn.iFrameResize=function(a){return this.filter(\"iframe\").each(function(b,c){w(c,a)}).end()}}var F=0,G=!1,H=!1,I=\"message\",J=I.length,K=\"[iFrameSizer]\",L=K.length,M=null,N=a.requestAnimationFrame,O={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},P={},Q=null,R=\"Host Page\",S={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:\"bodyOffset\",id:\"iFrameResizer\",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:\"parent\",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:\"scroll\",closedCallback:function(){},initCallback:function(){},messageCallback:function(){j(\"MessageCallback function not defined\")},resizedCallback:function(){},scrollCallback:function(){return!0}};a.jQuery&&E(jQuery),\"function\"==typeof define&&define.amd?define([],D):\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=D():a.iFrameResize=a.iFrameResize||D()}(window||{});\n"]}