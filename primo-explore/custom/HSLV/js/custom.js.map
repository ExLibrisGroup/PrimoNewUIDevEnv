{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/HSLV/js/main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","b","window","addEventListener","attachEvent","removeEventListener","detachEvent","d","charAt","toUpperCase","slice","ma","oa","g","la","_typeof","console","log","h","warn","ha","substr","na","split","X","Number","_","ja","U","Y","fa","W","$","ua","ia","enable","qa","Aa","j","location","href","Fa","Object","iFrameResizer","constructor","JSON","stringify","Ca","messageCallback","Da","readyCallback","ta","targetOrigin","heightCalculationMethod","widthCalculationMethod","k","m","indexOf","document","createElement","style","clear","display","body","appendChild","s","documentElement","height","Ba","parentIFrame","autoResize","y","close","R","ra","S","getId","getPageInfo","Ea","moveToAnchor","findTarget","reset","Q","scrollTo","scrollToOffset","sendMessage","setHeightCalculationMethod","setWidthCalculationMethod","setTargetOrigin","size","N","getBoundingClientRect","x","pageXOffset","scrollLeft","pageYOffset","scrollTop","parseInt","left","top","decodeURIComponent","getElementById","getElementsByName","hash","Array","prototype","forEach","querySelectorAll","getAttribute","preventDefault","this","setTimeout","ba","B","add","eventName","eventType","Ga","remove","eventNames","map","method","q","ea","Ia","za","Ja","MutationObserver","WebKitMutationObserver","D","Z","complete","src","push","type","attributeName","target","splice","l","querySelector","observe","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","disconnect","E","clearInterval","ka","setInterval","Math","abs","G","defaultView","getComputedStyle","test","V","runtimeStyle","currentStyle","pixelLeft","I","Ha","xa","J","bodyOffset","bodyScroll","documentElementOffset","documentElementScroll","K","L","M","da","ya","init","interval","pa","O","va","aa","resetPage","Ka","clearTimeout","wa","P","sa","postMessage","data","true","false","readyState","source","ca","ga","initFromParent","resize","inPageLink","pageInfo","parse","message","click","max","min","parent","offsetHeight","width","scrollWidth","Date","now","getTime","offset","scrollHeight","custom","apply","grow","lowestElement","taggedElement","offsetWidth","scroll","rightMostElement","arguments","app","angular","constant","config","$sceDelegateProvider","nodeserver","urlWhitelist","resourceUrlWhitelist","iFrameSizer","controller","$http","$scope","$sce","iframeResize","mashScope","iframeResizer","checkOrigin","traverse","node","$ctrl","service","linkElement","category","$$childHead","$$nextSibling","$root","mashLink","links","link","isLinkAvailable","trustAsResourceUrl","encodeURIComponent","component","template","vm","getSearchTerm","parentCtrl","term","bindings","book_icon","result","pnx","addata","doi","articleURL","jsonp","jsonpCallbackParam","then","response","article","error","issn","replace","journalURL","journal","newThumbnail","item","browzineEnabled","coverImageUrl","$doCheck","changes","selectedThumbnailLink","linkURL","query","facetService","$location","$$search","angularLoad","showTabsAndScopes","prmActionCtrl","$onInit","actionExists","smsAction","addAction","$onDestroy","removeAction","factory","addActionIcon","actionListService","requiredActionsList","index","name","actionsToIndex","onToggle","actionsToDisplay","unshift","removeActionIcon","actionLabelNamesMap","label","actionIconNamesMap","actionIcons","icon","hasOwnProperty","finishedSmsEvent","$watch","sendEmailService","carriers","smsCarriers","carrier","phoneNumber","telRegEx","validate","isCaptcha","appConfig","getCaptchaPublicKey","setResponse","gCaptchaResponse","sendSms","sendEmail","catch","finally","run","put","value","iconSet","ATT","T-Mobile","Virgin","Sprint","Nextel","Verizon","Cricket","Qwest","Project Fi","hathiTrustBaseUrl","$q","svc","findFullViewRecord","ids","deferred","defer","hathiTrustLookupUrl","join","cache","resp","fullTextUrl","items","usRightsString","toLowerCase","records","fromRecord","recordURL","resolve","promise","hathiTrust","hathiTrustIconPath","self","setDefaults","isOnline","hideOnline","updateHathiTrustAvailability","msg","prmSearchResultAvailabilityLine","delivery","GetIt1","some","isLinktoOnline","hathiTrustIds","oclcid","id","res","fullTextLink"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","!function(a){\"use strict\";function b(a,b,c){\"addEventListener\"in window?a.addEventListener(b,c,!1):\"attachEvent\"in window&&a.attachEvent(\"on\"+b,c)}function c(a,b,c){\"removeEventListener\"in window?a.removeEventListener(b,c,!1):\"detachEvent\"in window&&a.detachEvent(\"on\"+b,c)}function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a){var b,c,d,e=null,f=0,g=function(){f=Ha(),e=null,d=a.apply(b,c),e||(b=c=null)};return function(){var h=Ha();f||(f=h);var i=xa-(h-f);return b=this,c=arguments,i<=0||i>xa?(e&&(clearTimeout(e),e=null),f=h,d=a.apply(b,c),e||(b=c=null)):e||(e=setTimeout(g,i)),d}}function f(a){return ma+\"[\"+oa+\"] \"+a}function g(a){la&&\"object\"==typeof window.console&&console.log(f(a))}function h(a){\"object\"==typeof window.console&&console.warn(f(a))}function i(){j(),g(\"Initialising iFrame (\"+location.href+\")\"),k(),n(),m(\"background\",W),m(\"padding\",$),A(),s(),t(),o(),C(),u(),ia=B(),N(\"init\",\"Init message from host page\"),Da()}function j(){function b(a){return\"true\"===a}var c=ha.substr(na).split(\":\");oa=c[0],X=a!==c[1]?Number(c[1]):X,_=a!==c[2]?b(c[2]):_,la=a!==c[3]?b(c[3]):la,ja=a!==c[4]?Number(c[4]):ja,U=a!==c[6]?b(c[6]):U,Y=c[7],fa=a!==c[8]?c[8]:fa,W=c[9],$=c[10],ua=a!==c[11]?Number(c[11]):ua,ia.enable=a!==c[12]&&b(c[12]),qa=a!==c[13]?c[13]:qa,Aa=a!==c[14]?c[14]:Aa}function k(){function a(){var a=window.iFrameResizer;g(\"Reading data from page: \"+JSON.stringify(a)),Ca=\"messageCallback\"in a?a.messageCallback:Ca,Da=\"readyCallback\"in a?a.readyCallback:Da,ta=\"targetOrigin\"in a?a.targetOrigin:ta,fa=\"heightCalculationMethod\"in a?a.heightCalculationMethod:fa,Aa=\"widthCalculationMethod\"in a?a.widthCalculationMethod:Aa}function b(a,b){return\"function\"==typeof a&&(g(\"Setup custom \"+b+\"CalcMethod\"),Fa[b]=a,a=\"custom\"),a}\"iFrameResizer\"in window&&Object===window.iFrameResizer.constructor&&(a(),fa=b(fa,\"height\"),Aa=b(Aa,\"width\")),g(\"TargetOrigin for parent set to: \"+ta)}function l(a,b){return-1!==b.indexOf(\"-\")&&(h(\"Negative CSS value ignored for \"+a),b=\"\"),b}function m(b,c){a!==c&&\"\"!==c&&\"null\"!==c&&(document.body.style[b]=c,g(\"Body \"+b+' set to \"'+c+'\"'))}function n(){a===Y&&(Y=X+\"px\"),m(\"margin\",l(\"margin\",Y))}function o(){document.documentElement.style.height=\"\",document.body.style.height=\"\",g('HTML & body height set to \"auto\"')}function p(a){var e={add:function(c){function d(){N(a.eventName,a.eventType)}Ga[c]=d,b(window,c,d)},remove:function(a){var b=Ga[a];delete Ga[a],c(window,a,b)}};a.eventNames&&Array.prototype.map?(a.eventName=a.eventNames[0],a.eventNames.map(e[a.method])):e[a.method](a.eventName),g(d(a.method)+\" event listener: \"+a.eventType)}function q(a){p({method:a,eventType:\"Animation Start\",eventNames:[\"animationstart\",\"webkitAnimationStart\"]}),p({method:a,eventType:\"Animation Iteration\",eventNames:[\"animationiteration\",\"webkitAnimationIteration\"]}),p({method:a,eventType:\"Animation End\",eventNames:[\"animationend\",\"webkitAnimationEnd\"]}),p({method:a,eventType:\"Input\",eventName:\"input\"}),p({method:a,eventType:\"Mouse Up\",eventName:\"mouseup\"}),p({method:a,eventType:\"Mouse Down\",eventName:\"mousedown\"}),p({method:a,eventType:\"Orientation Change\",eventName:\"orientationchange\"}),p({method:a,eventType:\"Print\",eventName:[\"afterprint\",\"beforeprint\"]}),p({method:a,eventType:\"Ready State Change\",eventName:\"readystatechange\"}),p({method:a,eventType:\"Touch Start\",eventName:\"touchstart\"}),p({method:a,eventType:\"Touch End\",eventName:\"touchend\"}),p({method:a,eventType:\"Touch Cancel\",eventName:\"touchcancel\"}),p({method:a,eventType:\"Transition Start\",eventNames:[\"transitionstart\",\"webkitTransitionStart\",\"MSTransitionStart\",\"oTransitionStart\",\"otransitionstart\"]}),p({method:a,eventType:\"Transition Iteration\",eventNames:[\"transitioniteration\",\"webkitTransitionIteration\",\"MSTransitionIteration\",\"oTransitionIteration\",\"otransitioniteration\"]}),p({method:a,eventType:\"Transition End\",eventNames:[\"transitionend\",\"webkitTransitionEnd\",\"MSTransitionEnd\",\"oTransitionEnd\",\"otransitionend\"]}),\"child\"===qa&&p({method:a,eventType:\"IFrame Resized\",eventName:\"resize\"})}function r(a,b,c,d){return b!==a&&(a in c||(h(a+\" is not a valid option for \"+d+\"CalculationMethod.\"),a=b),g(d+' calculation method set to \"'+a+'\"')),a}function s(){fa=r(fa,ea,Ia,\"height\")}function t(){Aa=r(Aa,za,Ja,\"width\")}function u(){!0===U?(q(\"add\"),F()):g(\"Auto Resize disabled\")}function v(){g(\"Disable outgoing messages\"),ra=!1}function w(){g(\"Remove event listener: Message\"),c(window,\"message\",S)}function x(){null!==Z&&Z.disconnect()}function y(){q(\"remove\"),x(),clearInterval(ka)}function z(){v(),w(),!0===U&&y()}function A(){var a=document.createElement(\"div\");a.style.clear=\"both\",a.style.display=\"block\",document.body.appendChild(a)}function B(){function c(){return{x:window.pageXOffset!==a?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==a?window.pageYOffset:document.documentElement.scrollTop}}function d(a){var b=a.getBoundingClientRect(),d=c();return{x:parseInt(b.left,10)+parseInt(d.x,10),y:parseInt(b.top,10)+parseInt(d.y,10)}}function e(b){function c(a){var b=d(a);g(\"Moving to in page link (#\"+e+\") at x: \"+b.x+\" y: \"+b.y),R(b.y,b.x,\"scrollToOffset\")}var e=b.split(\"#\")[1]||b,f=decodeURIComponent(e),h=document.getElementById(f)||document.getElementsByName(f)[0];a!==h?c(h):(g(\"In page link (#\"+e+\") not found in iFrame, so sending to parent\"),R(0,0,\"inPageLink\",\"#\"+e))}function f(){\"\"!==location.hash&&\"#\"!==location.hash&&e(location.href)}function i(){function a(a){function c(a){a.preventDefault(),e(this.getAttribute(\"href\"))}\"#\"!==a.getAttribute(\"href\")&&b(a,\"click\",c)}Array.prototype.forEach.call(document.querySelectorAll('a[href^=\"#\"]'),a)}function j(){b(window,\"hashchange\",f)}function k(){setTimeout(f,ba)}function l(){Array.prototype.forEach&&document.querySelectorAll?(g(\"Setting up location.hash handlers\"),i(),j(),k()):h(\"In page linking not fully supported in this browser! (See README.md for IE8 workaround)\")}return ia.enable?l():g(\"In page linking not enabled\"),{findTarget:e}}function C(){g(\"Enable public methods\"),Ba.parentIFrame={autoResize:function(a){return!0===a&&!1===U?(U=!0,u()):!1===a&&!0===U&&(U=!1,y()),U},close:function(){R(0,0,\"close\"),z()},getId:function(){return oa},getPageInfo:function(a){\"function\"==typeof a?(Ea=a,R(0,0,\"pageInfo\")):(Ea=function(){},R(0,0,\"pageInfoStop\"))},moveToAnchor:function(a){ia.findTarget(a)},reset:function(){Q(\"parentIFrame.reset\")},scrollTo:function(a,b){R(b,a,\"scrollTo\")},scrollToOffset:function(a,b){R(b,a,\"scrollToOffset\")},sendMessage:function(a,b){R(0,0,\"message\",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){fa=a,s()},setWidthCalculationMethod:function(a){Aa=a,t()},setTargetOrigin:function(a){g(\"Set targetOrigin: \"+a),ta=a},size:function(a,b){N(\"size\",\"parentIFrame.size(\"+(a||\"\")+(b?\",\"+b:\"\")+\")\",a,b)}}}function D(){0!==ja&&(g(\"setInterval: \"+ja+\"ms\"),ka=setInterval(function(){N(\"interval\",\"setInterval: \"+ja)},Math.abs(ja)))}function E(){function b(a){function b(a){!1===a.complete&&(g(\"Attach listeners to \"+a.src),a.addEventListener(\"load\",f,!1),a.addEventListener(\"error\",h,!1),k.push(a))}\"attributes\"===a.type&&\"src\"===a.attributeName?b(a.target):\"childList\"===a.type&&Array.prototype.forEach.call(a.target.querySelectorAll(\"img\"),b)}function c(a){k.splice(k.indexOf(a),1)}function d(a){g(\"Remove listeners from \"+a.src),a.removeEventListener(\"load\",f,!1),a.removeEventListener(\"error\",h,!1),c(a)}function e(b,c,e){d(b.target),N(c,e+\": \"+b.target.src,a,a)}function f(a){e(a,\"imageLoad\",\"Image loaded\")}function h(a){e(a,\"imageLoadFailed\",\"Image load failed\")}function i(a){N(\"mutationObserver\",\"mutationObserver: \"+a[0].target+\" \"+a[0].type),a.forEach(b)}function j(){var a=document.querySelector(\"body\"),b={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return m=new l(i),g(\"Create body MutationObserver\"),m.observe(a,b),m}var k=[],l=window.MutationObserver||window.WebKitMutationObserver,m=j();return{disconnect:function(){\"disconnect\"in m&&(g(\"Disconnect body MutationObserver\"),m.disconnect(),k.forEach(d))}}}function F(){var a=0>ja;window.MutationObserver||window.WebKitMutationObserver?a?D():Z=E():(g(\"MutationObserver not supported in this browser!\"),D())}function G(a,b){function c(a){if(/^\\d+(px)?$/i.test(a))return parseInt(a,V);var c=b.style.left,d=b.runtimeStyle.left;return b.runtimeStyle.left=b.currentStyle.left,b.style.left=a||0,a=b.style.pixelLeft,b.style.left=c,b.runtimeStyle.left=d,a}var d=0;return b=b||document.body,\"defaultView\"in document&&\"getComputedStyle\"in document.defaultView?(d=document.defaultView.getComputedStyle(b,null),d=null!==d?d[a]:0):d=c(b.currentStyle[a]),parseInt(d,V)}function H(a){a>xa/2&&(xa=2*a,g(\"Event throttle increased to \"+xa+\"ms\"))}function I(a,b){for(var c=b.length,e=0,f=0,h=d(a),i=Ha(),j=0;j<c;j++)(e=b[j].getBoundingClientRect()[a]+G(\"margin\"+h,b[j]))>f&&(f=e);return i=Ha()-i,g(\"Parsed \"+c+\" HTML elements\"),g(\"Element position calculated in \"+i+\"ms\"),H(i),f}function J(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function K(a,b){function c(){return h(\"No tagged elements (\"+b+\") found on page\"),document.querySelectorAll(\"body *\")}var d=document.querySelectorAll(\"[\"+b+\"]\");return 0===d.length&&c(),I(a,d)}function L(){return document.querySelectorAll(\"body *\")}function M(b,c,d,e){function f(){da=m,ya=n,R(da,ya,b)}function h(){function b(a,b){return!(Math.abs(a-b)<=ua)}return m=a!==d?d:Ia[fa](),n=a!==e?e:Ja[Aa](),b(da,m)||_&&b(ya,n)}function i(){return!(b in{init:1,interval:1,size:1})}function j(){return fa in pa||_&&Aa in pa}function k(){g(\"No change in size detected\")}function l(){i()&&j()?Q(c):b in{interval:1}||k()}var m,n;h()||\"init\"===b?(O(),f()):l()}function N(a,b,c,d){function e(){a in{reset:1,resetPage:1,init:1}||g(\"Trigger event: \"+b)}function f(){return va&&a in aa}f()?g(\"Trigger event cancelled: \"+a):(e(),\"init\"===a?M(a,b,c,d):Ka(a,b,c,d))}function O(){va||(va=!0,g(\"Trigger event lock on\")),clearTimeout(wa),wa=setTimeout(function(){va=!1,g(\"Trigger event lock off\"),g(\"--\")},ba)}function P(a){da=Ia[fa](),ya=Ja[Aa](),R(da,ya,a)}function Q(a){var b=fa;fa=ea,g(\"Reset trigger event: \"+a),O(),P(\"reset\"),fa=b}function R(b,c,d,e,f){function h(){a===f?f=ta:g(\"Message targetOrigin: \"+f)}function i(){var h=b+\":\"+c,i=oa+\":\"+h+\":\"+d+(a!==e?\":\"+e:\"\");g(\"Sending message to host page (\"+i+\")\"),sa.postMessage(ma+i,f)}!0===ra&&(h(),i())}function S(a){function c(){return ma===(\"\"+a.data).substr(0,na)}function d(){return a.data.split(\"]\")[1].split(\":\")[0]}function e(){return a.data.substr(a.data.indexOf(\":\")+1)}function f(){return!(\"undefined\"!=typeof module&&module.exports)&&\"iFrameResize\"in window}function j(){return a.data.split(\":\")[2]in{true:1,false:1}}function k(){var b=d();b in m?m[b]():f()||j()||h(\"Unexpected message (\"+a.data+\")\")}function l(){!1===ca?k():j()?m.init():g('Ignored message of type \"'+d()+'\". Received before initialization.')}var m={init:function(){function c(){ha=a.data,sa=a.source,i(),ca=!1,setTimeout(function(){ga=!1},ba)}\"interactive\"===document.readyState||\"complete\"===document.readyState?c():(g(\"Waiting for page ready\"),b(window,\"readystatechange\",m.initFromParent))},reset:function(){ga?g(\"Page reset ignored by init\"):(g(\"Page size reset by host page\"),P(\"resetPage\"))},resize:function(){N(\"resizeParent\",\"Parent window requested size check\")},moveToAnchor:function(){ia.findTarget(e())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var a=e();g(\"PageInfoFromParent called from parent: \"+a),Ea(JSON.parse(a)),g(\" --\")},message:function(){var a=e();g(\"MessageCallback called from parent: \"+a),Ca(JSON.parse(a)),g(\" --\")}};c()&&l()}function T(){\"loading\"!==document.readyState&&window.parent.postMessage(\"[iFrameResizerChild]Ready\",\"*\")}if(\"undefined\"!=typeof window){var U=!0,V=10,W=\"\",X=0,Y=\"\",Z=null,$=\"\",_=!1,aa={resize:1,click:1},ba=128,ca=!0,da=1,ea=\"bodyOffset\",fa=ea,ga=!0,ha=\"\",ia={},ja=32,ka=null,la=!1,ma=\"[iFrameSizer]\",na=ma.length,oa=\"\",pa={max:1,min:1,bodyScroll:1,documentElementScroll:1},qa=\"child\",ra=!0,sa=window.parent,ta=\"*\",ua=0,va=!1,wa=null,xa=16,ya=1,za=\"scroll\",Aa=za,Ba=window,Ca=function(){h(\"MessageCallback function not defined\")},Da=function(){},Ea=function(){},Fa={height:function(){return h(\"Custom height calculation function not defined\"),document.documentElement.offsetHeight},width:function(){return h(\"Custom width calculation function not defined\"),document.body.scrollWidth}},Ga={},Ha=Date.now||function(){return(new Date).getTime()},Ia={bodyOffset:function(){return document.body.offsetHeight+G(\"marginTop\")+G(\"marginBottom\")},offset:function(){return Ia.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Fa.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,J(Ia))},min:function(){return Math.min.apply(null,J(Ia))},grow:function(){return Ia.max()},lowestElement:function(){return Math.max(Ia.bodyOffset()||Ia.documentElementOffset(),I(\"bottom\",L()))},taggedElement:function(){return K(\"bottom\",\"data-iframe-height\")}},Ja={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Fa.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Ja.bodyScroll(),Ja.documentElementScroll())},max:function(){return Math.max.apply(null,J(Ja))},min:function(){return Math.min.apply(null,J(Ja))},rightMostElement:function(){return I(\"right\",L())},taggedElement:function(){return K(\"right\",\"data-iframe-width\")}},Ka=e(M);b(window,\"message\",S),T()}}();\nvar app = app || angular.module(\n  'viewCustom', ['angularLoad', 'hathiTrustAvailability', 'sendSms']\n).constant(\n  'nodeserver', \"https://apiconnector.thirdiron.com/v1/libraries/72\"\n).config([\n  '$sceDelegateProvider',\n  'nodeserver',\n  function ($sceDelegateProvider, nodeserver) {\n    var urlWhitelist = $sceDelegateProvider.resourceUrlWhitelist();\n    urlWhitelist.push(nodeserver + '**');\n    $sceDelegateProvider.resourceUrlWhitelist(urlWhitelist);\n  }\n]);\n\nconsole.log(iFrameSizer);\napp.controller('prmLoginAlmaMashupAfterController',\n               ['$http', '$scope', '$sce', 'iframeResize', function ($http, $scope, $sce, iframeResize) {\n  iframeResize.iframeResizer({log:false,checkOrigin:false},'.mashup-iframe');\n  var mashScope;\n  // Find the prm-alma-mashup scope.\n  // This is a horrid hack, but I seen no alternatives.\n  // There's no prm-alma-mashup-after to use.\n  function traverse(node) {\n    if (mashScope) return;\n    if (node.$ctrl) {\n      if (node.$ctrl.service) {\n        if (node.$ctrl.service.linkElement && node.$ctrl.service.linkElement.category === 'Alma-E') {\n          $scope.mashScope = node.$ctrl;\n          return;\n        }\n      }\n    }\n    if (node.$$childHead) traverse(node.$$childHead)\n    if (node.$$nextSibling) traverse(node.$$nextSibling)\n  }\n  traverse($scope.$root);\n\n  const LINK_TEMPLATE = 'http://local-dev.northwestern.edu:3000/search/results/view_it_primo?url=';\n  if ($scope.mashScope) {\n    var mashLink = $scope.mashScope.service.linkElement.links[0].link;\n    $scope.isLinkAvailable = false;\n    if (mashLink  && typeof mashLink !== 'undefined') {\n      $scope.mashLink = $sce.trustAsResourceUrl(\n        LINK_TEMPLATE + encodeURIComponent(mashLink)\n      );\n      $scope.isLinkAvailable = true;\n    }\n  }\n}]);\n\napp.component('prmLoginAlmaMashupAfter', {\n  controller: 'prmLoginAlmaMashupAfterController',\n  template: `\n  <div>Hello: {{mashLink}}\n    <iframe class=\"mashup-iframe\"\n            ng-src=\"{{mashLink}}\"\n            style=\"width: 100%; border: none; overflow: hidden; height: 199px;\"\n            ng-if=\"isLinkAvailable\"\n            id=\"iFrameResizer1\"\n            scrolling=\"no\" />\n  </div>\n`\n});\n\n// Enhance No Results tile\n\napp.controller('prmNoSearchResultAfterController', [function () {\n  var vm = this;\n  vm.getSearchTerm = getSearchTerm;\n  function getSearchTerm() {\n    return vm.parentCtrl.term;\n  }\n}]);\n\napp.component('prmNoSearchResultAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmNoSearchResultAfterController',\n  template: '<md-card class=\"default-card zero-margin _md md-primoExplore-theme\"><md-card-title><md-card-title-text><span translate=\"\" class=\"md-headline ng-scope\">No records found.</span></md-card-title-text></md-card-title><md-card-content><p><span>There are no results matching your search: <i>{{$ctrl.getSearchTerm()}}</i>. Looking for a book? Try again searching items held at other libraries:</span></p><md-button class=\"md-raised md-button md-primoExplore-theme md-ink-ripple\" href=\"http://www.worldcat.org/search?q={{$ctrl.getSearchTerm()}}\" type=\"button\" aria-label=\"Search WorldCat\" style=\"margin-left:0;margin-right:0;\"> <img src=\"custom/NULV3/img/worldcat-logo.png\" width=\"22\" height=\"22\" alt=\"worldcat-logo\" style=\"vertical-align:middle;\"> Search WorldCat</md-button><p><span>Looking for an article? Try <strong><a href=\"http://scholar.google.com/scholar?hl=en&q={{$ctrl.getSearchTerm()}}\">Google Scholar</a></strong></span>.</p><p><span translate=\"\" class=\"bold-text ng-scope\">Suggestions:</span></p><ul><li translate=\"\" class=\"ng-scope\">Make sure that all words are spelled correctly.</li><li translate=\"\" class=\"ng-scope\">Try a different search scope.</li><li translate=\"\" class=\"ng-scope\">Try different search terms.</li><li translate=\"\" class=\"ng-scope\">Try more general search terms.</li><li translate=\"\" class=\"ng-scope\">Try fewer search terms.</li></ul><p><strong><a href=\"http://www.library.northwestern.edu/research/ask-us/index.html\">Contact a Research Librarian for Assistance</a></strong>.</p></md-card-content></md-card>'\n});\n\n//Add Interlibrary Loan links to My Account\n\napp.component('prmLoansOverviewAfter', {\n  bindings: {},\n  template: '<div class=\"tiles-grid-tile\"><div class=\"tile-content layout-column\" layout=\"column\"><div class=\"tile-header layout-column\" layout=\"column\"><div class=\"layout-align-space-between-stretch layout-row\" layout-align=\"space-between\"><h2 class=\"header-link light-text\"><span>Interlibrary Loan</span></h2></div></div><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view interlibrary loans checked out\" style=\"\" href=\"https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=66\"><span>View Items Checked Out</span></md-button><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view interlibrary loans checked out\" style=\"\" href=\"https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=64\"><span>View Items Available</span></md-button><md-button class=\"button-with-icon  overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view interlibrary loans checked out\" style=\"\" href=\"https://northwestern.illiad.oclc.org/illiad/illiad.dll?Action=10&Form=62\"><span>View Requests in Process</span></md-button></div></div>'\n});\n\n//End add ILL links\n\n// Check for content in Browzine\n\napp.controller('prmSearchResultAvailabilityLineAfterController', function ($scope, $http, nodeserver) {\n  var vm = this;\n  $scope.book_icon = \"https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png\";\n  if (vm.parentCtrl.result.pnx.addata.doi && vm.parentCtrl.result.pnx.display.type[0] == 'article') {\n    vm.doi = vm.parentCtrl.result.pnx.addata.doi[0] || '';\n    var articleURL = nodeserver + \"/articles?DOI=\" + vm.doi;\n    $http.jsonp(articleURL, { jsonpCallbackParam: 'callback' }).then(function (response) {\n      $scope.article = response.data;\n    }, function (error) {\n      console.log(error);\n    });\n  }\n  if (vm.parentCtrl.result.pnx.addata.issn && vm.parentCtrl.result.pnx.display.type[0] == 'journal') {\n    vm.issn = vm.parentCtrl.result.pnx.addata.issn[0].replace(\"-\", \"\") || '';\n    var journalURL = nodeserver + \"/journals?ISSN=\" + vm.issn;\n    $http.jsonp(journalURL, { jsonpCallbackParam: 'callback' }).then(function (response) {\n      $scope.journal = response.data;\n    }, function (error) {\n      console.log(error);\n    });\n  }\n});\n\n//Add Browzine and Hathitrust links to Brief Results\n\napp.component('prmSearchResultAvailabilityLineAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmSearchResultAvailabilityLineAfterController',\n  template: '<div ng-if=\"article.data.browzineWebLink\"><a href=\"{{ article.data.browzineWebLink }}\" target=\"_blank\" title=\"Via BrowZine\"><img src=\"https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png\" class=\"browzine-icon\"> View Issue Contents <md-icon md-svg-icon=\"primo-ui:open-in-new\" aria-label=\"icon-open-in-new\" role=\"img\" class=\"browzine-external-link\"><svg id=\"open-in-new_cache29\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" y=\"504\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"></svg></md-icon></a></div><div ng-if=\"journal.data[0].browzineWebLink\"><a href=\"{{ journal.data[0].browzineWebLink }}\" target=\"_blank\" title=\"Via BrowZine\"><img src=\"https://s3.amazonaws.com/thirdiron-assets/images/integrations/browzine_open_book_icon.png\" class=\"browzine-icon\"> View Journal Contents <md-icon md-svg-icon=\"primo-ui:open-in-new\" aria-label=\"icon-open-in-new\" role=\"img\" class=\"browzine-external-link\"><svg id=\"open-in-new_cache29\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" y=\"504\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"></svg></md-icon></a></div><hathi-trust-availability hide-online=\"true\"></hathi-trust-availability>'\n});\n\n// Add Journal Cover Images from BrowZine\n\napp.controller('prmSearchResultThumbnailContainerAfterController', function ($scope, $http, nodeserver) {\n  var vm = this;\n  var newThumbnail = '';\n  // checking for item property as this seems to impact virtual shelf browse (for reasons as yet unknown)\n  if (vm.parentCtrl.item && vm.parentCtrl.item.pnx.addata.issn) {\n    vm.issn = vm.parentCtrl.item.pnx.addata.issn[0].replace(\"-\", \"\") || '';\n    var journalURL = nodeserver + \"/journals?ISSN=\" + vm.issn;\n    $http.jsonp(journalURL, { jsonpCallbackParam: 'callback' }).then(function (response) {\n      if (response.data.data[\"0\"] && response.data.data[\"0\"].browzineEnabled) {\n        newThumbnail = response.data.data[\"0\"].coverImageUrl;\n      }\n    }, function (error) {\n      console.log(error); //\n    });\n  }\n  vm.$doCheck = function (changes) {\n    if (vm.parentCtrl.selectedThumbnailLink) {\n      if (newThumbnail != '') {\n        vm.parentCtrl.selectedThumbnailLink.linkURL = newThumbnail;\n      }\n    }\n  };\n});\n\napp.component('prmSearchResultThumbnailContainerAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmSearchResultThumbnailContainerAfterController'\n});\n\n// End BrowZine - Primo Integration\n\n//Logo with link\n\n/*\napp.controller('prmLogoAfterController', [function () {\n  var ctrl = this;\n\n  ctrl.getIconLink = function () {\n    return ctrl.parentCtrl.iconLink;\n  };\n}]);\n\napp.component('prmLogoAfter', {\n  bindings: {\n    parentCtrl: '<'\n  },\n  controller: 'prmLogoAfterController',\n  template: ' \\n    <div class=\"product-logo product-logo-local\" layout=\"row\" layout-align=\"start center\" layout-fill id=\"banner\" tabindex=\"0\" role=\"banner\"><a href=\"http://www.library.northwestern.edu/\"><img ng-src=\"{{$ctrl.getIconLink()}}\" alt=\"{{(\\'nui.header.LogoAlt\\' | translate)}}\"/></a>\\n    </div>\\n  '\n});\n*/\n\n//End add logo with link\n\n\n//Add NUPrint link to account\n\napp.component('prmMessagesAndBlocksOverviewAfter', {\n  bindings: { parentCtrl: '<' },\n  template: '<div class=\"tiles-grid-tile\"><div class=\"tile-content layout-column\" layout=\"column\"><div class=\"tile-header layout-column\" layout=\"column\"><div class=\"layout-align-space-between-stretch layout-row\" layout=\"row\" layout-align=\"space-between\"><h2 class=\"header-link light-text\"><span>NUPrint</span></h2></div></div><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view nuprint account\" style=\"\" href=\"https://nuprint.northwestern.edu/\"><span>View Account</span></md-button></div></div>'\n});\n\n//End Add NUPrint\n//Other search options\n\napp.controller('prmFacetRangeAfterController', [function () {\n  try {\n    this.query = this.parentCtrl.facetService.$location.$$search.query.split(\",\")[2];\n  } catch (e) {\n    this.query = \"\";\n  }\n}]);\n\napp.component('prmFacetRangeAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmFacetRangeAfterController',\n  template: '<md-card class=\"default-card zero-margin _md md-primoExplore-theme\"><md-card-content><p><strong>Not finding the book you were looking for?</strong> Try searching items held at other libraries:</p><md-button class=\"md-raised md-button md-primoExplore-theme md-ink-ripple\" href=\"http://www.worldcat.org/search?q={{$ctrl.query}}\" type=\"button\" aria-label=\"Search WorldCat\" style=\"margin-left:0;margin-right:0;\"> <img src=\"custom/NULV3/img/worldcat-logo.png\" width=\"22\" height=\"22\" alt=\"worldcat-logo\" style=\"vertical-align:middle;\"> Search WorldCat</md-button><p><span>Looking for an article? Try <strong><a href=\"http://scholar.google.com/scholar?hl=en&q={{$ctrl.query}}\">Google Scholar</a></strong></span>.</p>Looking for related concepts? Try <strong><a href=\"http://turing.library.northwestern.edu/login?url=https://yewno.com/edu/?query={{$ctrl.query}}\"\">Yewno</a></strong>.<p></p><p>Other questions? <strong><a href=\"http://www.library.northwestern.edu/research/ask-us/index.html\">Contact a Research Librarian for Assistance</a></strong>.</p></md-card-content></md-card>'\n});\n\n//Always display scope dropdown for basic searches\n\napp.component('prmSearchBarAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'SearchBarAfterController'\n});\n\napp.controller('SearchBarAfterController', ['angularLoad', function (angularLoad) {\n  var vm = this;\n  vm.parentCtrl.showTabsAndScopes = true;\n}]);\n\n//End display scopes\n\n//Add SMS actions menu\n\n'use strict';\n\nangular.module(\"sendSms\", [\"ngMaterial\", \"primo-explore.components\"]), angular.module(\"sendSms\").component(\"addSmsAction\", {\n  require: { prmActionCtrl: \"^prmActionList\" },\n  controller: [\"customActions\", \"smsOptions\", function (e, n) {\n    var t = this;\n    this.$onInit = function () {\n      e.actionExists(n.smsAction, t.prmActionCtrl) || e.addAction(n.smsAction, t.prmActionCtrl);\n    }, this.$onDestroy = function () {\n      e.actionExists(n.smsAction, t.prmActionCtrl) && e.removeAction(n.smsAction, t.prmActionCtrl);\n    };\n  }]\n}), angular.module(\"sendSms\").factory(\"customActions\", function () {\n  return {\n    addAction: function addAction(e, n) {\n      this.actionExists(e, n) ? console.error(\"Action already exists: \", e) : (this.addActionIcon(e, n), n.actionListService.requiredActionsList.splice(e.index, 0, e.name), n.actionListService.actionsToIndex[e.name] = e.index, n.actionListService.onToggle[e.name] = e.onToggle, n.actionListService.actionsToDisplay.unshift(e.name));\n    },\n    removeAction: function removeAction(e, n) {\n      if (this.actionExists(e, n)) {\n        this.removeActionIcon(e, n), delete n.actionListService.actionsToIndex[e.name], delete n.actionListService.onToggle[e.name];\n        var t = n.actionListService.actionsToDisplay.indexOf(e.name);\n        n.actionListService.actionsToDisplay.splice(t, 1), t = n.actionListService.requiredActionsList.indexOf(e.name), n.actionListService.requiredActionsList.splice(t, 1);\n      } else console.error(\"Action does not exist: \", e);\n    },\n    addActionIcon: function addActionIcon(e, n) {\n      n.actionLabelNamesMap[e.name] = e.label, n.actionIconNamesMap[e.name] = e.name, n.actionIcons[e.name] = e.icon;\n    },\n    removeActionIcon: function removeActionIcon(e, n) {\n      delete n.actionLabelNamesMap[e.name], delete n.actionIconNamesMap[e.name], delete n.actionIcons[e.name];\n    },\n    actionExists: function actionExists(e, n) {\n      return n.actionListService.actionsToIndex.hasOwnProperty(e.name);\n    }\n  };\n}), angular.module(\"sendSms\").component(\"ocaSendSms\", {\n  bindings: { item: \"<\", finishedSmsEvent: \"&\" },\n  template: '<div class=\"send-actions-content-item\" layout=\"row\"><md-content layout-wrap layout-padding layout-fill><form name=\"smsForm\" novalidate layout=\"column\" layout-align=\"center center\" (submit)=\"$ctrl.sendSms($event);\"><div layout=\"row\" class=\"layout-full-width\" layout-align=\"center center\"><div flex=\"20\" flex-sm=\"10\" hide-xs></div><div class=\"form-focus service-form\" layout-padding flex><div layout-margin><div layout=\"column\"><h4 class=\"md-subhead\">Standard message and data rates may apply.</h4><md-input-container class=\"underlined-input md-required\"><label>Phone number:</label><input ng-model=\"$ctrl.phoneNumber\" name=\"phoneNumber\" type=\"text\" required ng-pattern=\"::$ctrl.telRegEx\"><div ng-messages=\"smsForm.phoneNumber.$error\"><div ng-message=\"pattern, required \">phone number is invalid</div></div></md-input-container><md-input-container class=\"md-required\"><label>Carrier:</label><md-select ng-model=\"$ctrl.carrier\" name=\"carrier\" placeholder=\"Select a carrier\" required><md-option ng-repeat=\"(carrier, address) in carriers\" value=\"{{ address }}\">{{ carrier }}</md-option></md-select><div ng-messages=\"smsForm.carrier.$error\"><div ng-message=\"required\">please select a carrier</div></div></md-input-container><md-input-container class=\"underlined-input\" ng-if=\"$ctrl.isCaptcha\"><div vc-recaptcha key=\"$ctrl.getCaptchaPublicKey()\"on-success=\"$ctrl.setResponse(response)\"></div><span class=\"recaptcha-error-info\" ng-show=\"smsForm.$submitted && (smsForm.recaptchaResponse.$invalid || smsForm.$error.recaptcha.length)\"><span translate=\"captcha.notselected\"></span></span></md-input-container></div></div></div><div flex=\"20\" flex-sm=\"10\" hide-xs></div>\\n</div>\\n<div layout=\"row\"><div layout=\"row\" layout-align=\"center\" layout-fill><md-button type=\"submit\" class=\"button-with-icon button-large button-confirm\" aria-label=\"Send the result by SMS\"><prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"send\"></prm-icon><span translate=\"email.popup.link.send\"></span></md-button></div></div></form></md-content></div><prm-send-email ng-hide=\"true\"></prm-send-email><oca-send-sms-after parent-ctrl=\"$ctrl\"></oca-send-sms-after>',\n  controller: [\"$scope\", \"smsOptions\", function (e, n) {\n    var t = this;\n    this.$onInit = function () {\n      e.$watch(\"$$childTail.$ctrl\", function (e) {\n        return t.sendEmailService = e.sendEmailService;\n      }), e.carriers = n.smsCarriers, t.carrier = t.phoneNumber = \"\", t.telRegEx = /^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/;\n    }, this.validate = function () {\n      return t.telRegEx.test(t.phoneNumber) && t.carrier;\n    }, this.isCaptcha = function () {\n      return \"Y\" == window.appConfig[\"system-configuration\"][\"Activate Captcha [Y/N]\"];\n    }, this.getCaptchaPublicKey = function () {\n      return window.appConfig[\"system-configuration\"][\"Public Captcha Key\"];\n    }, this.setResponse = function (e) {\n      return t.gCaptchaResponse = e;\n    }, this.sendSms = function () {\n      t.validate() && t.sendEmailService.sendEmail([t.phoneNumber + \"@\" + t.carrier], \"\", \"\", [t.item], t.gCaptchaResponse).then(function (e) {\n        return console.log(\"sms successfully sent\", e);\n      }).catch(function (e) {\n        return console.error(\"sms sending failed\", e);\n      }).finally(function () {\n        return t.finishedSmsEvent();\n      });\n    };\n  }]\n}).run([\"$templateCache\", \"smsOptions\", function (e, n) {\n  e.put(\"components/search/actions/actionContainer/action-container.html\", \"\\n  <oca-send-sms ng-if=\\\"($ctrl.actionName==='\" + n.smsAction.name + '\\')\" finished-sms-event=\"$ctrl.throwCloseTabsEvent()\" item=\"::$ctrl.item\"></oca-send-sms>\\n  <prm-send-email ng-if=\"($ctrl.actionName===\\'E-mail\\')\" (finished-email-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [toggleform]=\"::$ctrl.toggleActionCotent\" [user]=\"::\\'\\'\"></prm-send-email>\\n  <prm-citation ng-if=\"($ctrl.actionName===\\'Citation\\')\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-citation>\\n  <prm-permalink ng-if=\"($ctrl.actionName===\\'Permalink\\')\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-permalink>\\n  <prm-print-item ng-if=\"($ctrl.actionName===\\'Print\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-print-item>\\n  <prm-endnote ng-if=\"($ctrl.actionName===\\'EndNote\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-endnote>\\n  <prm-easybib ng-if=\"($ctrl.actionName===\\'EasyBib\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-easybib>\\n  <prm-refworks ng-if=\"($ctrl.actionName===\\'RefWorks\\')\" (close-tabs-event)=\"$ctrl.throwCloseTabsEvent()\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-refworks>\\n  <prm-export-ris ng-if=\"($ctrl.actionName===\\'RISPushTo\\')\" [item]=\"::$ctrl.item\" [on-toggle]=\"::$ctrl.onToggle\"></prm-export-ris>\\n  <prm-action-container-after parent-ctrl=\"$ctrl\"></prm-action-container-after>');\n}]), angular.module(\"sendSms\").value(\"smsOptions\", { smsAction: { name: \"send_sms\", label: \"SMS\", index: 9, icon: { icon: \"ic_smartphone_24px\", iconSet: \"hardware\", type: \"svg\" } }, smsCarriers: { ATT: \"txt.att.net\", \"T-Mobile\": \"tmomail.net\", Virgin: \"vmobl.com\", Sprint: \"messaging.sprintpcs.com\", Nextel: \"messaging.nextel.com\", Verizon: \"vtext.com\", Cricket: \"mms.mycricket.com\", Qwest: \"qwestmp.com\", \"Project Fi\": \"msg.fi.google.com\" } });\n\napp.component('prmActionListAfter', {\n  template: '<add-sms-action />'\n});\n\n//end SMS \n\n//Adds link to Yewno after each set of ten results\n\napp.controller('prmSearchResultListAfterController', [function () {\n  try {\n    this.query = this.parentCtrl.facetService.$location.$$search.query.split(\",\")[2];\n  } catch (e) {\n    this.query = \"\";\n  }\n}]);\n\napp.component('prmSearchResultListAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmSearchResultListAfterController',\n  template: '<div class=\"layout-sm-column layout=\"column\"><div class=\"layout-row\" layout=\"row\"><div class=\"layout-row flex\" layout=\"row\"><md-card class=\"one-slot _md md-primoExplore-theme flex yewno-recommender\"><md-card-content class=\"layout-row\" layout=\"row\"><div class=\"max-width-100\"><div class=\"layout-row\"><div class=\"resource-image\"><div class=\"resource-image-inner normlized-resource-image\"><img class=\"md-card-image\" src=\"custom/NULV3/img/yewno-logo.png\"></div></div><div class=\"resource-content layout-fill\"><h3 class=\"normal-text resource-title\"><a href=\"http://turing.library.northwestern.edu/login?url=https://yewno.com/edu/?query={{$ctrl.query}}\">Try Yewno Discover</a></h3><p>Yewno is a new research platform that displays search results as relationships between concepts.</p><p>Search Yewno when you want to explore a topic and see what the connections are.</p><div></div></div></div></md-card-content></md-card></div></div></div>'\n});\n\n//End add link to Yewno\n//HathiTrust availability link\n\nconsole.log(iframeResize);\nangular.module('hathiTrustAvailability', []).value('hathiTrustIconPath', 'custom/NULV3/img/hathitrust.svg').constant('hathiTrustBaseUrl', \"https://catalog.hathitrust.org/api/volumes/brief/json/\").config(['$sceDelegateProvider', 'hathiTrustBaseUrl', function ($sceDelegateProvider, hathiTrustBaseUrl) {\n  var urlWhitelist = $sceDelegateProvider.resourceUrlWhitelist();\n  urlWhitelist.push(hathiTrustBaseUrl + '**');\n  $sceDelegateProvider.resourceUrlWhitelist(urlWhitelist);\n}]).factory('hathiTrust', ['$http', '$q', function ($http, $q) {\n  var svc = {};\n  var hathiTrustBaseUrl = \"https://catalog.hathitrust.org/api/volumes/brief/json/\";\n\n  svc.findFullViewRecord = function (ids) {\n    var deferred = $q.defer();\n\n    var handleResponse = function handleResponse(resp) {\n      var data = resp.data;\n      var fullTextUrl = null;\n      for (var i = 0; !fullTextUrl && i < ids.length; i++) {\n        var result = data[ids[i]];\n        for (var j = 0; j < result.items.length; j++) {\n          var item = result.items[j];\n          if (item.usRightsString.toLowerCase() === \"full view\") {\n            fullTextUrl = result.records[item.fromRecord].recordURL;\n            break;\n          }\n        }\n      }\n      deferred.resolve(fullTextUrl);\n    };\n\n    if (ids.length) {\n      var hathiTrustLookupUrl = hathiTrustBaseUrl + ids.join('|');\n      $http.jsonp(hathiTrustLookupUrl, { cache: true, jsonpCallbackParam: 'callback' }).then(handleResponse).catch(function (e) {\n        console.log(e);\n      });\n    } else {\n      deferred.resolve(null);\n    }\n\n    return deferred.promise;\n  };\n\n  return svc;\n}]).controller('hathiTrustAvailabilityController', ['hathiTrust', 'hathiTrustIconPath', function (hathiTrust, hathiTrustIconPath) {\n  var self = this;\n  self.hathiTrustIconPath = hathiTrustIconPath;\n\n  self.$onInit = function () {\n    setDefaults();\n    if (!(isOnline() && self.hideOnline)) {\n      updateHathiTrustAvailability();\n    }\n  };\n\n  var setDefaults = function setDefaults() {\n    if (!self.msg) self.msg = 'Full Text Available at HathiTrust';\n  };\n\n  var isOnline = function isOnline() {\n    return self.prmSearchResultAvailabilityLine.result.delivery.GetIt1.some(function (g) {\n      return g.links.some(function (l) {\n        return l.isLinktoOnline;\n      });\n    });\n  };\n\n  var updateHathiTrustAvailability = function updateHathiTrustAvailability() {\n    var hathiTrustIds = (self.prmSearchResultAvailabilityLine.result.pnx.addata.oclcid || []).map(function (id) {\n      return \"oclc:\" + id;\n    });\n    hathiTrust.findFullViewRecord(hathiTrustIds).then(function (res) {\n      self.fullTextLink = res;\n    });\n  };\n}]).component('hathiTrustAvailability', {\n  require: {\n    prmSearchResultAvailabilityLine: '^prmSearchResultAvailabilityLine'\n  },\n  bindings: {\n    hideOnline: '<',\n    msg: '@?'\n  },\n  controller: 'hathiTrustAvailabilityController',\n  template: '<span ng-if=\"$ctrl.fullTextLink\" class=\"umnHathiTrustLink\">\\\n                <md-icon md-svg-src=\"{{$ctrl.hathiTrustIconPath}}\" alt=\"HathiTrust Logo\"></md-icon>\\\n                <a target=\"_blank\" ng-href=\"{{$ctrl.fullTextLink}}\">\\\n                {{ ::$ctrl.msg }}\\\n                  <prm-icon external-link=\"\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\\\n                </a>\\\n              </span>'\n});\n\n"],"sourceRoot":"/source/"}